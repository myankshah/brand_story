// server injected code
/* Debug info: {"server":"WEB530","utc_time":"2017-01-18T09:26:03.331Z","method":"HTTP/GET","api_key":"3_8Fcn29ZQ5lcRRr8BsC6Y2q8eRKPl567JTM6IWXsqW4eqW57_fNx29GDl9YdzZLvH","site_found":true} */
if (typeof gigya == 'undefined' || !gigya.isGigya) { gigya = { isGigya: true } };
if (!gigya.__initialized) {
gigya.__initialized = true;
gigya.env='prod';
gigya.gaeDomain='chat.gigya.com';
gigya.build={version:'6.5.40',time:'Mon 01/16/2017 17:24:14.18'};
if (typeof gigya.partnerSettings == 'undefined') {
    gigya.partnerSettings={"authMode":"cookie","baseDomains":"forbes.com,onforb.es"};
    gigya.partnerSettings.plugins={"apiDomain":"US1.gigya.com"};
}
gigya.providersConfig = {};
gigya.abTesting = null;
gigya.samlConfig = null;
//end server injected code
// API adapters
var gigya;
(function(b){(function(f){(function(f){(function(e){(function(e){function h(a){var d=document.getElementById("gig_sso"),d=document.createElement("iframe");b.localInfo.isIOS||b.localInfo.isIOSChrome||b.localInfo.isAndroid?(d.style.width="0px",d.style.height="0px",d.style.display="none"):(d.style.width="30px",d.style.height="10px",d.style.position="absolute",d.style.top="-1000px",d.style.left="-1000px");d.id="gig_sso_"+a;return d}var c=0;e._request=function(a,d){if(b.partnerSettings.ssoKey){var g;g=
d?b.utils.object.clone(d):{};var e;g.m=a;g.d=b.localInfo.protocol+"://"+document.location.hostname;document.location.port&&(g.d+=":"+document.location.port);g.lid=b.utils.xd._flashListenerID;"string"===typeof b.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!==b.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(g.lid=b.thisScript.globalConf.legacyCrossSiteMethod+":"+b.utils.xd._flashListenerID);g.callbackID="gig_sso_cb"+(new Date).getTime()+"_"+c++;b.utils.xd.addMessageListener(g.callbackID,
{},!1,function(g){e.parentNode.removeChild(e);g&&(g.errorCode&&"string"===typeof g.errorCode&&(g.errorCode=Number(g.errorCode)),g.expires_in&&"string"===typeof g.expires_in&&(g.expires_in=Number(g.expires_in)));b.log.addLog("SSO: About to invoke callback for "+a+" with this response",g);d&&d.callback&&d.callback(g)});g.sAPIKey=b.thisScript.APIKey;var m=b.utils.keyValue.serialize(g);e=h(g.callbackID);var n=function(){e.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+b.partnerSettings.ssoKey+"&version=2#"+
m;b.utils.DOM.removeEventListener(e,"load",n)};b.utils.DOM.addEventListener(e,"load",n);b.log.addLog("SSO: Calling "+a,{SSOKey:b.partnerSettings.ssoKey,params:g});document.body?b.utils.DOM.appendToBody(e):b.utils.functions.invokeOnPageLoad(function(){return b.utils.DOM.appendToBody(e)})}else d&&d.callback&&d.callback({})};e.getGroupToken=function(a){e._request("getToken",{callback:function(b){e._storedLoginTokenExp=b.gltexp;a&&a.callback&&a.callback(b)}})};e.setGroupTokenFromResponse=function(a,b){a.sessionInfo&&
(a=a.sessionInfo);var g="string"===typeof a.expires_in&&a.expires_in?Number(a.expires_in):a.expires_in;if(0===g)g=0;else var c=void 0,c=g?1E3*g:47304E7,g=Date.now()+c;e.setGroupToken({lt:a.login_token,expiration:g,callback:b})};e.setGroupToken=function(a){a.gltexp||(a.gltexp=b.utils.cookie.get("gltexp_"+b.thisScript.APIKey));e._request("setToken",a)};e.logout=function(a){e._request("logout",a)};e.removeGroupToken=function(a){e._request("removeToken",a)};e.setLoginTokenExp=function(a){e._storedLoginTokenExp&&
a.loginTokenExp===e._storedLoginTokenExp?a.callback&&a.callback():(e._storedLoginTokenExp=a.loginTokenExp,e._request("setLoginTokenExp",a))}})(e.sso||(e.sso={}))})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(e){var f=function(){function h(b,a,d,g,e,m){void 0===m&&(m={});this.id=b;this.baseUrl=a;this.methodName=d;this.params=g;this.callback=e;this.settings=m}h.prototype.getUrl=function(){return this.baseUrl+"/"+this.methodName};h.prototype.getAuthParams=function(){var c={};if(this.params.oauth_token)this.params.authMode="token";else if(!this.params.noAuth&&!window._isAPIProxy&&!this.params.regToken){var a=e.tokenStore.get(this.params.APIKey);if(a){this.sentLoginToken=
a;var d=b.utils.cookie.get("gltexp_"+this.params.APIKey);null!=d&&(c.loginTokenExp=d);c.login_token=a}c.authMode="cookie"}delete this.params.noAuth;b.localInfo.isAndroidBrowser&&(delete this.params.login_token,delete this.params.loginTokenExp,delete this.params.authMode);return c};return h}();e.BaseRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
var __extends=this&&this.__extends||function(b,f){function l(){this.constructor=b}for(var e in f)f.hasOwnProperty(e)&&(b[e]=f[e]);b.prototype=null===f?Object.create(f):(l.prototype=f.prototype,new l)};
(function(b){(function(f){(function(f){(function(e){e.callback=function(b,c){!c&&b&&(c=b.context);if(c){var a=e.pendingRequests[c];a&&a.handleResponse(b)}};var f=function(f){function c(){f.apply(this,arguments);this.ifrName="gigyaPostIframe_"+(new Date).getTime();this.retry=0}__extends(c,f);c.prototype.addDefaultParams=function(){this.params.format="jsonp";this.params.callback=c.callbackName;this.params.context=this.id;var a=this.getAuthParams();this.paramsLoginToken=this.params.login_token;b.utils.object.add(this.params,
a,!0);this.sentLoginToken=this.params.login_token};c.prototype.getCacheKey=function(){return this.methodName+"_"+b.utils.keyValue.serialize(this.params)};c.prototype.send=function(a){var d=this;if(!this.inProgress){e.pendingRequests[this.id]=this;this.inProgress=!0;this.params.sdk="js_"+b.build.version;this.addDefaultParams();var g=b.utils.keyValue.serialize(this.params);if(!a&&this.settings.cacheTimeout)g=this.getCacheKey(),b.utils.sessionCache.get(g,this.settings.cacheTimeout,function(a){a?(delete d.settings.cacheTimeout,
e.callback(a,d.id)):(d.inProgress=!1,d.send(!0))});else{a=0;b.localInfo.isIE&&(a=2048);var c=this.getUrl();b.events.global.dispatch({eventName:"jsonp-beforeRequest",url:c,params:this.params,level:9});4096>=c.length+1+g.length+a&&!this.settings.forcePost?b.utils.script.load(c+"?"+g,function(){e.callback({context:d.id,errorCode:500026,errorMessage:"Network_error"})}):b.utils.functions.invokeOnPageLoad(function(){var a=document.getElementById("gigyaRequestForms");null==a&&(a=document.createElement("span"),
a.id="gigyaRequestForms",a.style.display="none",b.utils.DOM.appendToBody(a));var g=d.getPostContainer();a.appendChild(g)})}}};c.prototype.createParamFormElements=function(){var a=[],d="";for(d in this.params)a=a.concat(['<textarea name="',d,'">']),"object"===typeof this.params[d]?a.push(b.utils.URL.URLEncode(b.utils.JSON.serialize(this.params[d]))):a.push(this.params[d]),a.push("</textarea>");return a.join("")};c.prototype.getPostContainer=function(){var a=this;if(!this.postContainer){var d=document.createElement("span"),
g=this.ifrName+"form",c=this.id;d.innerHTML=['<form accept-charset="UTF-8" id="',g,'" method="post" action="',this.getUrl(),"?context="+this.id+"&saveResponseID="+this.id+'" target="',this.ifrName,'">',this.createParamFormElements(),'<input name="utf8" type="hidden" value="&#x2713;" /><input type="submit" value="" /></form>'].join("");var e,f=b.utils.DOM.createElement("iframe",this.ifrName);f.setAttribute("id",this.ifrName);b.utils.DOM.addEventListener(f,"load",function(){e?a.getSavedFormResponse(c):
(window.setTimeout(function(){var a=document.getElementById(g);a&&a.submit()},10),e=!0)});d.appendChild(f);this.postContainer=d}return d};c.prototype.getSavedFormResponse=function(a){var b=this;(new c(a,this.baseUrl,"socialize.getSavedResponse",{APIKey:this.params.APIKey,saveResponseID:this.id,ucid:this.params.ucid,noAuth:!0},function(a){b.handleResponse(a)})).send()};c.prototype.getDataPendingTimeout=function(a){return 4>=a?500:8>=a?1E3:21>=a?2E3:39>=a?5E3:-1};c.prototype.handleResponse=function(a){var d=
this;this.settings.cacheTimeout&&b.utils.sessionCache.set(this.getCacheKey(),0==a.errorCode?a:null);null!=this.retryTimerID&&window.clearTimeout(this.retryTimerID);this.loaded=!0;this.inProgress=!1;100001==a.errorCode?(a=this.getDataPendingTimeout(this.retry++),0<a&&window.setTimeout(function(){d.send()},a)):(this.dispose(),this.callback(a))};c.prototype.dispose=function(){delete e.pendingRequests[this.id];this.postContainer&&b.utils.DOM.removeElement(this.postContainer);delete this.postContainer};
c.callbackName="gigya._.apiAdapters.web.callback";return c}(e.BaseRequest);e.JsonpRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(l){(function(e){var k=function(h){function c(a,b,g,c,e,f){void 0===f&&(f={});h.call(this,a,b,g,c,e,f);this.windowName=this.methodName.replace(/\./g,"_").replace(/\//g,"")+"_"+(new Date).getTime();this.requestID=this.windowName+(new Date).getTime()}__extends(c,h);c.prototype.beforeRequest=function(){};c.prototype.afterResponse=function(a){a.dontClose&&"false"!==a.dontClose||b.utils.win.close(this.windowName);this.callback(a)};c.prototype.getAuthFlow=function(){return this.params.authFlow?
this.params.authFlow:"popup"};c.prototype.getStateString=function(){var a=b.utils.xd._flashListenerID;if(b.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!==b.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()||b.localInfo.isIE&&window.navigator.msDoNotTrack)a=b.thisScript.globalConf.legacyCrossSiteMethod+":"+b.utils.xd._flashListenerID;var d=this.getAuthFlow(),a={domain:document.location.href.split("?")[0].split("#")[0],id:this.requestID,lid:a,messaging:b.localInfo.messagingMethod,
addUserInfo:!0};b.localInfo.isIE11&&window.indexedDB&&(a.messaging=f.MessagingMethod.LocalStorageListener);if("redirect"===d||b.localInfo.isWindowsPhone)a.sourceURL=window.top.document.location.href,this.params.redirectURL?(a.redirectURL=b.utils.URL.addParamsToURL(this.params.redirectURL,{gig_events:b.events.global.getEventsForOperation(this.methodName)}),this.params.redirectMethod&&(a.redirectMethod=this.params.redirectMethod)):a.sourceURL=b.utils.URL.addParamsToURL(a.sourceURL,{gig_events:b.events.global.getEventsForOperation(this.methodName)});
this.params.provider&&"facebook"==this.params.provider.toLowerCase()&&(a.invite=this.params.invite);(d=b.external.backplane.getChannelId())&&(a.bp_channel_url=d);return b.utils.keyValue.serialize(a)};c.prototype.getServerParamsString=function(){var a={},d;for(d in this.params)0!==d.indexOf("x_")&&null!=this.params[d]&&(a["x_"+d]=this.params[d],delete a[d]);a.x_APIKey&&(a.client_id=a.x_APIKey,delete a.x_APIKey);a.x_oauth_token&&(a.oauth_token=a.x_oauth_token,delete a.x_oauth_token);a.redirect_uri=
"/GS/AfterLogin.aspx";a.response_type=this.params.authCodeOnly?"code":"server_token";a.format="jsonp";a.x_sdk="js_"+b.build.version;(d=b.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(a.x_refUID=d);a.state=this.getStateString();b.utils.object.add(a,this.getAuthParams());e.useAPIProxy&&e.gmidTicket&&(a.gmidTicket=e.gmidTicket);delete a.redirectURL;this.sentLoginToken=a.login_token;return b.utils.keyValue.serialize(a)};c.prototype.send=function(){var a=this;this.beforeRequest();var d=this.getServerParamsString(),
g;this.params.provider&&(g=b.socialize._getProviderByName(this.params.provider));var c={menubar:0,resizable:1,scrollbars:1,width:g?g.width:void 0,height:g?g.height:void 0};this.params.enablePopupLocation?(c.location=1,c.toolbar=1):c.toolbar=0;var e=this.methodName.split(".");b.reports.report(this.params.originalMethodName||e[e.length-1],this.params.APIKey,this.params.cid,this.params.source,this.params.sourceData,{sn:g?g.toString():null});d=this.getUrl()+"?"+d;"redirect"===this.getAuthFlow()?window.top.document.location.href=
d:(b.utils.xd.addMessageListener(this.requestID,this.params,!0,function(b){a.afterResponse(b)}),b.utils.win.open(d,this.windowName,c))};return c}(e.BaseRequest);e.OauthRequest=k})(l.web||(l.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(e){var f=function(f){function c(){f.apply(this,arguments)}__extends(c,f);c.prototype.send=function(a){var d=this;if(e.proxyState.ready){var g=function(a){(a=b.utils.JSON.parse(a.data))&&a.id==d.id&&(b.utils.DOM.removeEventListener(window,"message",g),d.callback(a.response))};b.utils.DOM.addEventListener(window,"message",g);b.utils.object.add(this.params,this.getAuthParams());e.ifrAPIProxy.contentWindow.postMessage(this.json(),"https://cdns.gigya.com")}else e.proxyState.error&&
this.callback({context:this.id,errorCode:500026,errorMessage:"APIProxy error: "+e.proxyState.error})};c.prototype.json=function(){return b.utils.JSON.serialize({id:this.id,methodName:this.methodName,params:this.params,settings:this.settings})};return c}(e.BaseRequest);e.APIProxyRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(l){(function(e){(function(k){function h(a){void 0===a&&(a=b.thisScript.APIKey);return a?"glt_"+a:"_gig_lt"}var c={};k.activeNamespaces={};k.get=function(a){void 0===a&&(a=b.thisScript.APIKey);return(a=b.utils.cookie.get(h(a)))?a.split("|")[0]:null};k.set=function(a,d,g){b.utils.localStorage.removeItem("gigyaSettings");a||(a=b.thisScript.APIKey);a?(b.utils.cookie.set("glt_"+a,d,g),b.utils.cookie.remove("gac_"+a)):b.utils.cookie.set("_gig_lt",d,g)};k.setFromGAC=function(a,
d){if(b.thisScript.APIKey){var g=b.utils.cookie.get("gac_"+b.thisScript.APIKey);g&&!a.neverTryGAC?('"'===g.charAt(0)&&'"'===g.charAt(g.length-1)&&(g=g.substring(1,g.length-1)),c[g]?d():(c[g]=!0,b.socialize.updateRefUID(),b.socialize.notifyLogin({ignoreApiQueue:!0,neverTryGAC:!0,authCode:g,APIKey:b.thisScript.APIKey,client_id:b.thisScript.APIKey},{callback:function(){b.utils.cookie.remove("gac_"+b.thisScript.APIKey);d();b.socialize.refreshUI({neverTryGAC:!0})}}))):d()}else d()};k.setFromSsoResponse=
function(a,d){void 0===d&&(d=b.thisScript.APIKey);if(0==a.errorCode){k.set(d,a.login_token,a.gltexp?b.utils.cookie.getInfiniteExpirationTimeInSeconds():a.expires_in);var g="gltexp_"+d;a.gltexp&&!b.utils.cookie.get(g)&&b.utils.cookie.set(g,a.gltexp);b.accounts.verifyLogin({include:"profile,data",extraProfileFields:"samlData",callback:function(a){b.events.global.dispatchWhenHandlerAdded({eventName:"socialize.login"},null,function(d,g){b.socialize.getUserInfo({signIDs:!0,extraFields:"samlData",callback:function(c){d||
(d={});0==a.errorCode&&0==c.errorCode?(d=f.addUserInfoToEvent(c,{eventName:"login"},!0),b.external.backplane.executeOnInit(function(){var a=b.external.backplane.getChannelId();a&&b.socialize.notifySSOLogin({bp_channel_url:a})})):d.cancel=!0;g(d)}})});b.events.global.dispatchWhenHandlerAdded({eventName:"accounts.login"},null,function(d,g){d||(d={});0==a.errorCode?(d.eventName="accounts.login",b.utils.object.extractProperties(a,d,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data")):
d.cancel=!0;g(d)})}})}};k.remove=function(a){void 0===a&&(a=b.thisScript.APIKey);e.sso.removeGroupToken();b.utils.cookie.remove("glt_"+a);b.utils.cookie.remove("_gig_lt");b.utils.cookie.remove("gltexp_"+a)};k.migrateExisting=function(){var a=b.utils.cookie.get("_gig_lt");a&&b.thisScript.APIKey&&!k.get(b.thisScript.APIKey)&&(b.utils.cookie.remove("_gig_lt"),k.set(b.thisScript.APIKey,a))};k.getTokenParam=function(a,d){var g=b.utils.cookie.get(h(a));if(g)return g=g.split("|"),1<g.length?b.utils.keyValue.deserialize(g[1])[d]:
null}})(e.tokenStore||(e.tokenStore={}))})(l.web||(l.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));gigya.isGigya||(gigya.isGigya=!0);
(function(b){(function(f){(function(l){(function(e){e.newApiAdapter=function(b){return new h(b)};var k=function(){return function(){}}();e.APIProxyState=k;e.callbacks={};e.pendingRequests={};var h=function(){function c(a){this.name="Web"}c.prototype.init=function(a){var d=this;this.initAPIProxy(function(){b.utils.functions.createAlias("gigya.auth.loginToken.get",e.tokenStore.get);d.checkReturnFromURL();d.isSessionValid(void 0,function(d){!d&&b.partnerSettings.ssoKey?e.sso.getGroupToken({callback:function(b){b&&
e.tokenStore.setFromSsoResponse(b);a()}}):a()})})};c.prototype.initAPIProxy=function(a){e.ifrAPIProxy&&(b.utils.DOM.removeElement(e.ifrAPIProxy),e.ifrAPIProxy=null);this.isAPIProxyNeeded()?this.loadAPIProxy(a):this.isThirdPartyCookiesBlockCheckNeeded()?this.checkThirdPartyCookiesBlocked(a):(e.useAPIProxy=!1,a())};c.prototype.isAPIProxyNeeded=function(){e.useAPIProxy=!1;if(b.partnerSettings.ssoKey&&b.partnerSettings.customAPIDomainPrefix||"1"===b.utils.localStorage.getItem("_gig_APIProxy_enabled"))b.utils.localStorage.setItem("_gig_APIProxy_enabled",
"1"),e.useAPIProxy=!0;return e.useAPIProxy};c.prototype.isThirdPartyCookiesBlockCheckNeeded=function(){var a=b.thisScript.globalConf.bypassCookiePolicy||"whenBlockedByDefault";return("whenBlockedByDefault"===a&&b.localInfo.isSafari||"always"===a)&&!window._isAPIProxy&&b.localInfo.supportsPostMessage&&!b.partnerSettings.customAPIDomainPrefix};c.prototype.checkThirdPartyCookiesBlocked=function(a){var d=this,g,c=function(f){(f=b.utils.JSON.parse(f.data))&&"3pcTestResult"===f.id&&(b.utils.DOM.removeEventListener(window,
"message",c),!0===f.enabled?(e.useAPIProxy=!1,e.gmidTicket=null,a()):(b.utils.localStorage.setItem("_gig_APIProxy_enabled","1"),e.useAPIProxy=!0,d.loadAPIProxy(a)),g.parentElement.removeChild(g))};b.utils.DOM.addEventListener(window,"message",c);var f=b.localInfo.protocol+"://"+document.location.href.split("?")[0].split("#")[0].split("/")[2];g=b.utils.DOM.createHiddenIframe(("https"===b.localInfo.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com")+"/gs/3PCTest.html#domain="+encodeURIComponent(f))};
c.prototype.loadAPIProxy=function(a){var d=b.localInfo.protocol+"://"+document.location.href.split("?")[0].split("#")[0].split("/")[2];e.gmidTicket=b.utils.localStorage.getItem("_gig_gmidt");var d="https://cdns.gigya.com/gs/APIProxy.html#apikey="+encodeURIComponent(b.thisScript.APIKey)+"&domain="+encodeURIComponent(d)+"&hasTicket="+(e.gmidTicket?"true":"false"),g=function(d){(d=b.utils.JSON.parse(d.data))&&d.apiKey==b.thisScript.APIKey&&(e.proxyState=d,e.proxyState.gmidTicket&&(e.gmidTicket=e.proxyState.gmidTicket,
b.utils.localStorage.setItem("_gig_gmidt",e.gmidTicket,86400)),b.utils.DOM.removeEventListener(window,"message",g),a())};b.utils.DOM.addEventListener(window,"message",g);e.ifrAPIProxy=b.utils.DOM.createHiddenIframe(d)};c.prototype.isSessionValid=function(a,b){void 0===a&&(a={});e.tokenStore.setFromGAC(a,function(){if(b){var g=null!=e.tokenStore.get(a.APIKey)||null!=a.oauth_token;b(g)}})};c.prototype.registerForNamespaceEvents=function(a){};c.prototype.onPluginEvent=function(a){};c.prototype.onJSLog=
function(a,b){};c.prototype.getGmidTicket=function(a){a&&a(e.useAPIProxy?e.gmidTicket:null)};c.prototype.sendRequest=function(a,b,g,c){var m=this;void 0===c&&(c={});this.beforeRequest(a,b,c);var h=this.getBaseUrl(a,b,c),k=this.getRequestId({baseUrl:h,methodName:a,params:b,settings:c});e.callbacks[k]=e.callbacks[k]||[];e.callbacks[k].push(g);if(!e.pendingRequests[k]){var l;g=function(a){m.afterResponse(l,a,function(a){m.dispatchCallbacks(k,a)})};l=e.useAPIProxy&&0!==h.indexOf("http://")?new e.APIProxyRequest(k,
h,a,b,g,c):new e.JsonpRequest(k,h,a,b,g,c);l.send();f.logoutMethods[a]&&f.logoutBehaviour.logoutBeforeServerResponse&&this.clearSession(b)}};c.prototype.clearSession=function(a,b){e.tokenStore.remove(a.APIKey);b&&b()};c.prototype.sendOauthRequest=function(a,b,g,c){var f=this;this.beforeRequest(a,b,c);var h=this.getBaseUrl(a,b,c),k=new e.OauthRequest("",h,a,b,function(a){f.afterResponse(k,a,function(a){g(a)})},c);k.send()};c.prototype.getBaseUrl=function(a,d,g){a=a.split(".");a=g.forceGigyaDomain?
b.utils.stringUtils.format("{0}.{1}",a[0],b.partnerSettings.plugins.originalApiDomain):b.partnerSettings.customAPIDomainPrefix?b.partnerSettings.customAPIDomainPrefix+"."+b.partnerSettings.baseDomain:b.utils.stringUtils.format("{0}.{1}",a[0],d.apiDomain?d.apiDomain:b.partnerSettings.plugins.apiDomain);return((e.tokenStore.get()||d.regToken||d.oauth_token)&&!d.noAuth||g.forceHttps||"https"===b.localInfo.protocol?"https://":"http://")+a};c.prototype.beforeRequest=function(a,d,g){void 0===g&&(g={});
(g.clearSession||g.clearSessionCondition&&g.clearSessionCondition(d))&&e.tokenStore.remove(d.APIKey);!b.utils.localStorage.getItem("_gig_3pc_enabled")&&b.thisScript.globalConf.enableSSOToken&&f.loginMethods[a]&&(d.includeSSOToken=!0)};c.prototype.afterResponse=function(a,b,g){var c=this;this.handleTokenResponse(a,b,function(){c.logoutSsoIfNeeded(a,b,function(){g(b)})})};c.prototype.onSDKEvent=function(a){};c.prototype.getTokenParam=function(a,b){return e.tokenStore.getTokenParam(a,b)};c.prototype.checkReturnFromURL=
function(){var a=b.utils.URL.getParamsFromURL(document.location.href);a.gig_events&&0==a.errorCode&&null!=e.tokenStore.get()&&e.sso.setGroupTokenFromResponse({errorCode:0,login_token:e.tokenStore.get(),expires_in:a.expires_in},function(d){var c=a.gig_events.split(",");-1!==b.utils.array.indexOf(c,"accounts.login")?b.accounts.getAccountInfo({extraProfileFields:"samlData",include:"profile,data,userinfo",callback:function(a){var d={errorCode:0,eventName:"accounts.login"};b.utils.object.extractProperties(a,
d,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");b.events.global.dispatchWhenHandlerAdded(d);-1!==b.utils.array.indexOf(c,"socialize.login")&&(a=f.addUserInfoToEvent(a,{errorCode:0,eventName:"socialize.login"},!0),b.events.global.dispatchWhenHandlerAdded(a))}}):b.socialize.getUserInfo({signIDs:!0,extraFields:"samlData",callback:function(a){for(var d=0;d<c.length;d++){var e=b._.addUserInfoToEvent(a,{errorCode:0,eventName:c[d]},!0);b.events.global.dispatchWhenHandlerAdded(e)}}})})};
c.prototype.setNewLoginTokenFromResponse=function(a,d,c){var f=d.sessionInfo?d.sessionInfo.login_token:d.login_token;if(f){var m=null!=d.sessionInfo?d.sessionInfo.expires_in:d.expires_in;(!m||0==m)&&0>a.params.sessionExpiration&&(m=b.utils.cookie.getInfiniteExpirationTimeInSeconds());e.tokenStore.set(a.params.APIKey,f,m);b.utils.cookie.remove("gltexp_"+a.params.APIKey);b.reports.trackAddressBarShares();e.sso.setGroupTokenFromResponse(d,c)}else c()};c.prototype.onInvalidTokenResponse=function(a,b){var c=
this;a.paramsLoginToken?b():e.sso.getGroupToken({callback:function(f){f&&f.login_token&&f.login_token.split("|")[0]!==a.sentLoginToken&&!a.paramsLoginToken?c.initAPIProxy(function(){e.tokenStore.setFromSsoResponse(f,a.params.APIKey);a.params.login_token=void 0;a.send()}):(e.tokenStore.remove(a.params.APIKey),a.settings.requiresSession()?b():(delete a.params.login_token,delete a.sentLoginToken,a.send()))}})};c.prototype.handleTokenResponse=function(a,d,c){var h=this;d=b.utils.object.clone(d);if(d.ssoToken){var m=
(new Date).getTime(),m=(new Date(m+3E5)).getTime();b.utils.localStorage.setItem("_gig_ssoToken",b.utils.JSON.serialize({ssoToken:d.ssoToken,exp:m}))}if(403030==d.errorCode){if(this.shouldWaitForService(a,d))return}else 409012==d.errorCode&&(e.gmidTicket=null,b.utils.localStorage.removeItem("_gig_gmidt"));a.sentLoginToken&&f.logoutMethods[a.methodName]&&0==d.errorCode&&d.logoutActiveSession&&this.clearSession(a.params);b.partnerSettings.ssoKey&&a.sentLoginToken&&0==d.errorCode&&a.params.loginTokenExp&&
e.sso.setLoginTokenExp({loginTokenExp:a.params.loginTokenExp});this.setNewLoginTokenFromResponse(a,d,function(){if(a.sentLoginToken&&403005==d.errorCode)h.onInvalidTokenResponse(a,c);else c()})};c.prototype.logoutSsoIfNeeded=function(a,d,c){var h=this;b.partnerSettings.ssoKey&&f.logoutMethods[a.methodName]&&0==d.errorCode&&d.logoutActiveSession?document.location.href!=b.partnerSettings.ssoLogoutUrl?e.sso.logout({callback:function(b){var e;void 0!==a.params.sustainLogoutURLs&&(e=!a.params.sustainLogoutURLs);
h.loadLogoutUrls(b.logoutURLs,c,{UID:d.UID,UIDSignature:d.UIDSignature,signatureTimestamp:d.signatureTimestamp},e)}}):c():c()};c.prototype.loadLogoutUrls=function(a,d,c,e){var f=0,h=a?a.split(","):[];a=function(){f++;f>h.length&&d()};for(var k=0;k<h.length;k++)if(h[k]){var l=b.utils.URL.addParamsToURL(h[k],c);this.loadLogoutUrl(l,a,e)}else a();a()};c.prototype.loadLogoutUrl=function(a,d,c){void 0===c&&(c=5E3);var e=document.createElement("iframe");e.src=a;e.style.position="absolute";e.style.top="-1000px";
e.style.left="-1000px";var f=!1,h=function(){f=!0;!1!==c&&e.parentElement.removeChild(e);d()};window.setTimeout(function(){f||h()},c);e.onload=function(){h()};b.utils.DOM.appendToBody(e)};c.prototype.shouldWaitForService=function(a,d){return a.params.retryPossible?(a.params.retryPossible=!1,b.external.facebook.runWhenLoaded(function(){a.send()}),!0):!1};c.prototype.dispatchCallbacks=function(a,d){var c=e.callbacks[a];if(c)for(var f=0;f<c.length;f++)if("function"===typeof c[f])c[f](b.utils.object.clone(d,
!0));delete e.callbacks[a]};c.prototype.getRequestId=function(a){var d=a.settings.jsSdkRequestId;if(d)return d;if(a.settings.disableCache||this.getIsForceBrowserRequest(a))return"R"+(new Date).getTime()+"_"+Math.random();var d=b.utils.object.clone(a.params),c;for(c in d)0!==c.indexOf("fb_")&&"source"!==c&&"sourceData"!==c||delete d[c];return"R"+b.utils.object.getMurmurHash(a.baseUrl+a.methodName+b.utils.object.getHash(d))};c.prototype.getIsForceBrowserRequest=function(a){return b.localInfo.isSafari||
b.localInfo.isIE10&&"accounts.getAccountInfo"===a.methodName?!0:!1};return c}();e.WebAdapter=h})(l.web||(l.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(e){var f=function(){function e(){var c=b.utils.keyValue.deserialize(document.location.href.split("#")[1],"&",!0);this.apiKey=c.apikey;this.originDomain=c.domain;this.hasTicket="true"===c.hasTicket;this.urlScheme=0===document.location.href.indexOf("https:")?"https":"http"}e.init=function(){e.instance=new e;e.instance.init()};e.prototype.init=function(){var c=this;this.isOriginDomainValid()?this.loadIDs(function(a){if(a)c.postState({ready:!1,error:a});
else{if(c.gmid&&c.ucid)c.hasTicket?c.postState({ready:!0}):c.getGmidTicketFromServer(function(a){c.postState({ready:!0,gmidTicket:a})});else{var d,e=10,f=function(a,b,f,h,k){0!==a&&403036!==a&&--e?window.setTimeout(d,10):(c.gmid=b,c.ucid=h,c.storeIDs(function(){c.postState({ready:0==a,gmidTicket:f,error:k})}))};d=function(){return c.getIDsFromServer(f)};d()}b.utils.DOM.addEventListener(window,"message",function(a){return c.onRequest(a)})}}):this.postState({ready:!1,error:"domain_mismatch"})};e.prototype.onRequest=
function(c){var a=this;c=b.utils.JSON.parse(c.data);var d,e;if(c&&"object"===typeof c&&c.methodName&&c.id&&c.params){d=c.methodName;e=c.id;var f=b.utils.object.clone(c.params,!0,!0);f.gmid=this.gmid;f.ucid=this.ucid;(new b._.apiAdapters.web.JsonpRequest(e,this.getAPIBaseUrl(d),d,f,function(c){c=b.utils.JSON.serialize({id:e,response:c});b.utils.JSON.deserialize(c)||(c=b.utils.JSON.serialize({id:e,response:{errorCode:400004,errorMessage:"Invalid parameter format. One of the parameters of this request has been set with a value which is not in the expected format."}}));
window.parent.postMessage(c,a.originDomain)},c.settings)).send()}};e.prototype.isOriginDomainValid=function(){return Boolean(b._.getPageBaseDomain(this.originDomain))};e.prototype.getIDsFromServer=function(c){var a={APIKey:this.apiKey,includeTicket:!0,ticketExpires:86400};(new b._.apiAdapters.web.JsonpRequest("idsRequest",this.getAPIBaseUrl("socialize.getIDs"),"socialize.getIDs",a,function(a){var e=a.errorCode;0!==e&&b.log.addLog("Failed to get IDs from server",a);c(e,a.gcid,a.gmidTicket,a.ucid,a.errorMessage)})).send()};
e.prototype.getGmidTicketFromServer=function(c){var a={gmid:this.gmid,APIKey:this.apiKey,expires:86400};(new b._.apiAdapters.web.JsonpRequest("gmidTicketRequest",this.getAPIBaseUrl("socialize.getGmidTicket"),"socialize.getGmidTicket",a,function(a){c(a.gmidTicket)})).send()};e.prototype.getAPIBaseUrl=function(c){c=c.split(".");return"https://"+b.utils.stringUtils.format("{0}.{1}",c[0],b.partnerSettings.plugins.apiDomain)};e.prototype.postState=function(c){c||(c={});c.apiKey=this.apiKey;window.parent.postMessage(b.utils.JSON.serialize(c),
this.originDomain)};e.prototype.loadIDs=function(b){var a=this;this.getIDsFromStorage(function(d,e,f,h){a.gmid=d;a.ucid=e;if(f&&(a.hasTicket=!1,a.gmid)){a.storeIDs(function(){b(h)});return}b(h)})};e.prototype.getIDsFromStorage=function(c){var a,d,g,f;b.utils.localStorage.waitForService(function(k){!1===k.isPersistent()&&c(null,null,!1,"no_supported_cookie_storage");a=b.utils.localStorage.getItem(e.SSO_GMID_STORAGE_KEY);d=k.getItem(e.GMID_STORAGE_KEY);g=k.getItem(e.UCID_STORAGE_KEY);a&&a!==d&&(f=!0,
d=a);c(d,g,f)})};e.prototype.storeIDs=function(c){var a=this;b.utils.localStorage.waitForService(function(b){b.setItem(e.GMID_STORAGE_KEY,a.gmid);b.setItem(e.UCID_STORAGE_KEY,a.ucid);c()})};e.SSO_GMID_STORAGE_KEY="gig_sso_gmid";e.GMID_STORAGE_KEY="gig_gmid";e.UCID_STORAGE_KEY="gig_ucid";return e}();e.APIProxy=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
var gigya;
(function(b){(function(g){(function(e){(function(h){h.newApiAdapter=function(a){return new d(a)};h.mobileCallbacks={};var e="is_session_valid send_request send_oauth_request get_ids on_plugin_event on_custom_event register_for_namespace_events".split(" "),f={logLevel:[]},d=function(){function a(c){this.adapterSettings=c;this.name="Mobile"}a.prototype.init=function(c){var a=this;this.features=this.adapterSettings&&"function"===typeof this.adapterSettings.getFeatures?b.utils.JSON.deserialize(this.adapterSettings.getFeatures()):e;
this.adapterSettings&&"function"===typeof this.adapterSettings.getSettings?(this.settings=b.utils.JSON.deserialize(this.adapterSettings.getSettings())||{},this.settings.logLevel=b.utils.array.getArrayFromString(this.settings.logLevel||f.logLevel.join(","),",")):this.settings=f;b.events.addMap({defaultMethod:function(c){a.onPluginEvent(c)},eventMap:[{events:"*",args:["$event"]}]});this.sendToMobile("get_ids",null,function(d){a.ucid=d.ucid;a.gcid=d.gcid;for(var l in b.events.global._activeNamespaces)a.registerForNamespaceEvents(l);
b.localInfo.isNativeMobileApp=!0;c()})};a.prototype.getTokenParam=function(c,a){return""};a.prototype.onPluginEvent=function(c){c.isGlobal||this.sendToMobile("on_plugin_event",c)};a.prototype.onCustomEvent=function(c){this.sendToMobile("on_custom_event",c)};a.prototype.onJSLog=function(c,a){this.isLogLevelSupported(c)&&this.sendToMobile("on_js_log",{logType:c,logInfo:a})};a.prototype.registerForNamespaceEvents=function(c){this.sendToMobile("register_for_namespace_events",{namespace:c})};a.prototype.getGmidTicket=
function(c){c&&this.sendRequest("socialize.getGmidTicket",{expires:30},function(a){c(a.gmidTicket)},{forceHttps:!0})};a.prototype.clearSession=function(c,a){this.sendToMobile("clear_session",c,a)};a.prototype.isSessionValid=function(c,a){this.sendToMobile("is_session_valid",{},a)};a.prototype.sendRequest=function(c,a,b,d){this.sendToMobile("send_request/"+c,a,b,d)};a.prototype.sendOauthRequest=function(a,b,d,e){this.sendToMobile("send_oauth_request/"+a,b,d,e)};a.prototype.sendToMobile=function(a,
d,e,g){if(this.isActionSupported(a)){var f=document.createElement("iframe");f.style.display="none";d&&delete d.APIKey;if(e){var k=(new Date).getTime()+"_"+Math.random();h.mobileCallbacks[k]=function(a){e(a);document.documentElement.removeChild(f);delete h.mobileCallbacks[k]}}a="gsapi://"+a+"?callbackID="+(k||"")+"&params="+(d?encodeURIComponent(b.utils.keyValue.serialize(d)):"")+"&settings="+(g?encodeURIComponent(b.utils.keyValue.serialize(g)):"");f.src=a;window.setTimeout(function(){return document.documentElement.appendChild(f)},
0)}else e&&e({errorCode:400096,errorMessage:"Mobile SDK does not support feature "+a})};a.prototype.onSDKEvent=function(a){a&&a.user&&g.convertIdentitiesArrayToObject(a.user);b.events.global.dispatch(a)};a.prototype.isActionSupported=function(a){if(!a)return!1;a=a.split("/")[0].toLowerCase();return-1<b.utils.array.indexOf(this.features,a)};a.prototype.isLogLevelSupported=function(a){return-1!=b.utils.array.indexOf(this.settings.logLevel,"*")||-1!=b.utils.array.indexOf(this.settings.logLevel,a)};return a}();
h.MobileAdapter=d})(e.mobile||(e.mobile={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(g){(function(e){(function(e){e.showPlugin=function(e,f){var d=e.split("."),a=d.splice(d.length-1,1)[0];d.length||(d=["socialize"]);"commentsUI"==e&&(d=["comments"]);a="show"+b.utils.stringUtils.capitalize(a);d.push(a);for(a=b;a&&d.length;)a=a[d.shift()];if("function"!==typeof a)return b.events.dispatchInvalidParamError(b.utils.object.merge([{plugin:e},f]),"plugin");a(f)}})(e.mobile||(e.mobile={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));

// end API adapters
var gigya;
(function(a){var b=navigator.userAgent.toLowerCase(),g="function"===typeof FileReader||"object"===typeof FileReader?!0:!1,h=new Date,f=document.location.hostname,d="http:"==document.location.protocol?"http":"https",e=-1!=b.indexOf("win"),c=-1!=b.indexOf("msie")||-1!=b.indexOf("mozilla")&&-1!=b.indexOf("trident"),k=-1!=b.indexOf("msie 6."),t=-1!=b.indexOf("msie 7."),n=-1!=b.indexOf("msie 8."),l=-1!=b.indexOf("msie 9."),m=-1!=b.indexOf("msie 10."),q=-1!=b.indexOf("mozilla")&&-1!=b.indexOf("trident/7.0"),r=
-1!=b.indexOf("edge"),p=-1!=b.indexOf("iphone")||-1!=b.indexOf("ipad")||-1!=b.indexOf("ipod"),u=-1!=b.indexOf("safari/534"),v;v=-1!=b.indexOf("applewebkit")&&-1!=b.indexOf("version/")?parseInt(b.split("version/")[1].split(" ")[0]):0;var w=-1!=b.indexOf("android"),A=function(a){return-1===a.indexOf("mozilla/5.0")||-1===a.indexOf("android 4")||-1===a.indexOf("applewebkit")||-1!==a.indexOf("windows phone")?!1:(a=/chrome\/(\d+)/.exec(a))?20>parseInt(a[1]):!0}(b),x;x=-1!=b.indexOf("android")?parseFloat(b.slice(b.indexOf("android")+
8)):0;a.localInfo={isBrowserSupportsFilesAPI:g,initTime:h,version:0,pageDomain:f,protocol:d,userAgent:b,isWin:e,isIE:c,isIE6:k,isIE7:t,isIE8:n,isIE9:l,isIE10:m,isIE11:q,isEdge:r,isIOS:p,isSafari534:u,iosVersion:v,isAndroid:w,isAndroidBrowser:A,currentBrowser:"",androidVersion:x,isChrome:-1!=b.indexOf("chrome")&&-1==b.indexOf("edge"),isGoogleBot:-1!=b.indexOf("googlebot"),isFF:-1!=b.indexOf("firefox"),isOpera:-1!=b.indexOf("opera"),isSafari:navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("safari")&&
-1==navigator.appVersion.toLowerCase().indexOf("chrome")&&-1==b.indexOf("android"),isIOSWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isIOSChrome:-1!=b.indexOf("crios"),isMAC:navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("mac")?!0:!1,isWindowsPhone:-1!=b.indexOf("windows phone"),supportsPostMessage:null!=window.postMessage&&(-1==b.indexOf("msie")||-1!=b.indexOf("iemobile")),supportsLocalStorage:!1,supportsSessionStorage:!1,supportsFlash:function(){var a=
!1;try{navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin?a=!0:new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(c){}return a}(),quirksMode:"BackCompat"==document.compatMode&&-1!=b.indexOf("msie"),backCompat:"BackCompat"==document.compatMode,isMobile:function(){var a="iphone;ipod;android;midp;240x320;blackberry;netfront;nokia;panasonic;portalmmm;sharp;sie-;sonyericsson;symbian;windows ce;benq;mda;mot-;opera mini;philips;pocket pc;sagem;samsung;htc".split(";"),
c;for(c in a)if(-1!=b.indexOf(a[c]))return!0;return!1}(),isMobileApp:function(){if(!document.getElementsByTagName)return!1;for(var a=document.getElementsByTagName("meta"),c=0;c<a.length;c++)if("viewport"==a[c].getAttribute("name")){var e=a[c].getAttribute("content");if(e&&-1!==e.indexOf("width=device-width"))return!0}return!1}(),isNativeMobileApp:!1,isTouch:function(){if("ontouchstart"in window)return!0;if("onmsgesturechange"in window)try{new ActiveXObject("htmlfile")}catch(a){return!0}return!1}(),
messagingMethod:0};g=function(c){if(!c||a.localInfo.isSafari&&window.parent!==window&&!window._isAPIProxy)return!1;try{c.setItem("_gig_localStorage_test","just checking for localStorage");var e="just checking for localStorage"===c.getItem("_gig_localStorage_test");c.removeItem("_gig_localStorage_test");return e}catch(k){return!1}};a.localInfo.supportsLocalStorage=g(window.localStorage);a.localInfo.supportsSessionStorage=g(window.sessionStorage);a.localInfo.isIE11&&!window.indexedDB&&(a.localInfo.supportsPostMessage=
!1);a.localInfo.isMAC=a.localInfo.isMAC&&!a.localInfo.isIOS;(g=a.localInfo.isWin?"windows":a.localInfo.isWindowsPhone?"winphone":a.localInfo.isIOS?"ios-v"+a.localInfo.iosVersion:a.localInfo.isMAC?"mac":a.localInfo.isAndroid?"android":"")&&(g+=" ");a.localInfo.currentBrowser=g+(a.localInfo.isChrome?"chrome":a.localInfo.isFF?"firefox":a.localInfo.isSafari?"safari":a.localInfo.isEdge?"edge":a.localInfo.isIE11?"ie11":a.localInfo.isIE10?"ie10":a.localInfo.isIE9?"ie9":a.localInfo.isIE8?"ie8":"")})(gigya||
(gigya={}));
(function(a){(function(a){(function(a){function b(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}a.trim=function(a){return a.replace(/^\s*(\S*(.*\S)?)\s*$/,"$1")};a.format=function(a){for(var d=1;d<arguments.length;d++);for(d=0;d<arguments.length-1;d++)null!=arguments[d+1]&&(a=a.split("{"+d+"}").join(arguments[d+1]));return a};a.capitalize=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)};a.endsWith=function(a,d){return-1!==a.indexOf(d,a.length-d.length)};a.escapeRegExp=b;
a.replaceAll=function(a,d,e){return d?a.replace(new RegExp(b(d),"g"),e):a}})(a.stringUtils||(a.stringUtils={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){function g(f){var d=a.thisScript?a.thisScript.baseDomain:"";if(!d||a.utils.stringUtils.endsWith(d,".gigya.com"))d=b.CDN_HOSTS[a.localInfo.protocol],d.length<=h&&(h=0),d=d[h++];f&&0!==f.indexOf("/")&&(f="/"+f);return a.localInfo.protocol+"://"+d+(f||"")}var h=0;b.CDN_HOSTS={http:["cdn.gigya.com","cdn1.gigya.com","cdn2.gigya.com","cdn3.gigya.com"],https:["cdns.gigya.com","cdns1.gigya.com","cdns2.gigya.com","cdns3.gigya.com"]};b.getCdnResource=g;b.getImgCdnResource=function(){return g("/gs/i/")}})(a._||
(a._={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){function b(a,c){for(var k=0;k<a.length;++k)c(a[k],k,a)}function f(a,c){for(var k=0;k<a.length;++k)if(c(a[k],k,a))return!0;return!1}function d(a,c){var k=-1;f(a,function(a,e,d){return c(a,e,d)?(k=e,!0):!1});return k}a.indexOf=function(a,c){for(var k=0;k<a.length;k++)if(a[k]==c)return k;return-1};a.clone=function(a){for(var c=[],k=0;k<a.length;k++)c[k]=a[k];return c};a.removeByValue=function(a,c){if(a)for(var k=a.length-1;0<=k;k--)a[k]==c&&a.splice(k,1)};a.removeByProperty=
function(a,c,k){if(a)for(var d=a.length-1;0<=d;d--)a[d][c]==k&&a.splice(d,1)};a.getArrayFromString=function(a,c,k){if(!a||"string"!=typeof a)return[];k&&(a=a.toLowerCase());return(a=a.replace(/[ ]/g,"").replace(/,,/g,","))?a.split(c):[]};a.intersect=function(a){for(var c=1;c<arguments.length;c++);if(null==a)return[];for(var c=[],k=arguments.length,d=0,b=a.length;d<b;d++){var f=a[d];if(-1==this.indexOf(c,f)){for(var g=1;g<k;g++){var h=arguments[g];if(null==h||-1==this.indexOf(h,f))break}g===k&&c.push(f)}}return c};
a.lastIndexOf=function(a,c,d){void 0===d&&(d=0);for(var b=a.length;--b>=d;)if(a[b]===c)return b;return-1};a.forEach=b;a.forEachProp=function(a,c){for(var d in a)a.hasOwnProperty(d)&&c(a[d],d,a)};a.some=f;a.every=function(a,c){for(var d=0;d<a.length;++d)if(!c(a[d],d,a))return!1;return!0};a.everyProp=function(a,c){for(var d in a)if(a.hasOwnProperty(d)&&!c(a[d],d,a))return!1;return!0};a.map=function(a,c){var d=[];b(a,function(a,e,b){return d.push(c(a,e,b))});return d};a.firstIndex=d;a.first=function(a,
c){return a[d(a,c)]};a.getAllEnumValues=function(a){var c=[],d;for(d in a)"number"==typeof a[d]&&c.push(a[d]);return c}})(a.array||(a.array={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));(function(a){(function(a){(function(a){a.create=function(a,b){return function(){for(var d=[],e=0;e<arguments.length;e++)d[e-0]=arguments[e];return b.apply(a,d)}}})(a.delegate||(a.delegate={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.fill=function(b,f){"function"==typeof b&&(b=b(f));b instanceof Array&&(b=b.join(""));var d=/(\$)(!?)([a-z_][a-z_.\d]*)([(][^()]*[)])?|(\$)(!?)\{([a-z_][a-z_.\d]*)([(][^()]*[)])?\}/gi;d.lastIndex=0;for(var e=b,c=d.exec(e),k;null!=c;){k="$"==c[1]?0:4;var t="!"==c[2+k],g=c[3+k];k=c[4+k];null==k&&(k="");"."==g.substring(0,1)&&(g=g.substring(1));"DBG"==g.substring(0,3)&&(g=g.substring(3));var l="";for(k=g+k;k!=l;){var l=k,m=d.lastIndex;k=a.utils.templates.fill(l,
f);d.lastIndex=m}l="";m=0;if(null!=f[g.split(".")[0]])try{l=(new Function("o","p",'return eval("o." + p)'))(f,k)}catch(q){}else l="$"+(t?"!":"")+k,m=1;e=t?e.replace(c[0],""):e.substr(0,c.index)+l+e.substr(c.index+c[0].length);d.lastIndex=c.index+m;c=d.exec(e)}return e}})(b.templates||(b.templates={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){function b(){var a=0,e=0;"number"==typeof window.pageYOffset?(e=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(e=document.body.scrollTop,a=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(e=document.documentElement.scrollTop,a=document.documentElement.scrollLeft);return{left:a,top:e}}function f(){var a,e;e=document.documentElement;
var c=document.body;window.innerHeight?(a=window.innerHeight,e=window.innerWidth):(a=e.clientHeight,0==a&&(a=c.clientHeight),e=e.clientWidth,0==e&&(e=c.clientWidth));return{w:e,h:a}}a.getScroll=b;a.getFullSize=function(){var a=document.documentElement,e=document.body,c=a.clientHeight;0==c&&(c=e.clientHeight);a=a.clientWidth;0==a&&(a=e.clientWidth);return{w:a,h:c}};a.getOrientation=function(){var a=parseInt(window.orientation||"0");0>a&&(a+=360);return a};a.getInnerSize=f;a.getMiddleCenter=function(){var a=
b(),e=f();return{top:a.top+Math.floor(e.h/2),left:a.left+Math.floor(e.w/2)}};a.isRectHorizontallyVisible=function(a){var e=b(),c=f();return a.left>=e.left&&a.right<=e.left+c.w};a.isRectFullyVisible=function(a){var e=b(),c=f();return a.top>=e.top&&a.bottom<=e.top+c.h&&a.left>=e.left&&a.right<=e.left+c.w};a.scrollIntoView=function(a){a&&a.scrollIntoView&&a.scrollIntoView()}})(a.viewport||(a.viewport={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(d,e,c,k,b){void 0===e&&(e=!1);void 0===c&&(c=!1);void 0===k&&(k=0);void 0===b&&(b=20);if(a.localInfo.isIE8){k||(k=0);if(k>b)return"[Too deep]";var f=b="",g="";if(c)for(var g="\t",f="\n",m=0;m<k+1;m++)b+=g;var q=typeof d;if("function"==q)return q.toString();if("object"!=q||null===d)return"string"==q&&(d='"'+d.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"'),String(d);var r,p,u=[],v=d&&d.constructor==Array;if(v)for(m=0;m<d.length;m++)p=d[m],
q=typeof p,null==p||"undefined"==q?p="":"string"==q?p='"'+p.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==q?p=e?"Function":"":p.parentNode&&p.innerHTML?p="HTMLElement":p.constructor==Date?p="":"object"==q&&null!==p&&(p=h(p,e,c,k+1)),""!=String(p)&&u.push(b+g+String(p));else for(r in d)p=d[r],q=typeof p,null==p||"undefined"==q?p=String(p):"string"==q?p='"'+p.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==q?p=e?"Function":"":p.parentNode&&p.innerHTML?
p="HTMLElement":p.constructor==Date?p="":"object"==q&&null!==p&&(p=f+h(p,e,c,k+1)),""!=String(p)&&u.push(b+g+'"'+r.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'":'+String(p));return f+b+(v?"[":"{")+f+u.join(","+f)+f+b+(v?"]":"}")}return window.JSON.stringify(d)}function f(a){""===a&&(a='""');eval("var o");try{eval("o="+a)}catch(e){}return eval("o")}b.serialize=h;b.deserialize=f;b.parse=function(d){if(a.localInfo.isIE8)return f(d);try{return window.JSON.parse(d)}catch(e){}}})(b.JSON||(b.JSON=
{}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(g){function h(a){var c=[];"string"===typeof a.className&&(c=a.className.split(" "));return c}function f(a,c){if(a){if(!c)return!0;if(!a.className)return!1}else return!1;for(var d=!1,b=h(a),f=0;f<b.length;f++)if(b[f]===c){d=!0;break}return d}g._nextZIndex=999999999;g._popupContainers=[];g._pseudoContainers=[];var d=null;g.getGigyaScriptElement=function(a){for(var c=document.getElementsByTagName("script"),d,b=/\/\/cdn(s)?\.(ru1\.)?gigya.com/,f=c.length-1;0<=f;f--){var g=
c[f],h=g.src.toLowerCase();if(""!==h&&(b.test(h)||-1<h.indexOf("?apikey="))&&(0===a.length||a.some(function(a){return-1<h.indexOf(a)}))){d=g;break}}return d};g.dispatch=function(a,c){var d;try{d=new Event(c)}catch(b){d=document.createEvent("CustomEvent"),d.initCustomEvent(c,!0,!0,{})}a.dispatchEvent(d)};g.addEventListener=function(a,c,d){a&&d&&(a.addEventListener?a.addEventListener(c,d,!0):a.attachEvent("on"+c,d))};g.removeEventListener=function(a,c,d){d&&(a.removeEventListener?a.removeEventListener(c,
d,!0):a.detachEvent("on"+c,d))};g.disableDefaultEventHandling=function(a){a.preventDefault?a.preventDefault():window.event&&(window.event.returnValue=!1)};g.addDialogBackListener=function(e){a.utils.DOM._removeDialogBackListener();d=function(c){c&&c.newURL&&-1==c.newURL.indexOf("|gigyaMobileDialog")&&(e(c),a.utils.DOM._removeDialogBackListener())};window.setTimeout(function(){-1==window.location.hash.indexOf("|gigyaMobileDialog")&&(window.location.hash+="|gigyaMobileDialog");a.utils.DOM.addEventListener(window,
"hashchange",d)},50)};g._removeDialogBackListener=function(){d&&(a.utils.DOM.removeEventListener(window,"hashchange",d),d=null,window.location.hash=window.location.hash.replace("|gigyaMobileDialog",""))};g.appendToBody=function(a){document.body&&(document.body.insertBefore&&document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a))};g.removeElement=function(a){a&&a.parentElement&&a.parentElement.removeChild(a)};g.isChildOf=function(a,c){for(var d=
a.parentNode;d;){if(c==d)return!0;d=d.parentNode}return!1};g.isVisible=function(a){for(;a;){var c=getComputedStyle(a);if("none"===c.display||"hidden"===c.visibility)return!1;a=a.parentElement}return!0};g.getCenteredDivID=function(e){return"gig_"+a.localInfo.initTime.getTime().toString()+"_"+e};g.createTopLevelDiv=function(e){var c;c=document.createElement("iframe");c.id="gigya_ifr_"+e;c.frameborder="0";c.frameBorder="0";c.allowtransparency=!0;c.hidden=!0;c.style.position="absolute";c.style.width=
a.localInfo.isChrome?"30px":"1px";c.style.height="1px";null!=c.style.zIndex&&(c.style.zIndex=a.utils.DOM._nextZIndex++);var d=document.createElement("div");null!=d.style.zIndex&&(d.style.zIndex=""+a.utils.DOM._nextZIndex++);d.innerHTML="";e&&(d.id=e);document.body&&(document.body.insertBefore&&document.body.firstChild?(document.body.insertBefore(c,document.body.firstChild),document.body.insertBefore(d,document.body.firstChild)):document.body.appendChild&&(document.body.appendChild(c),document.body.appendChild(d)));
return d};g.hideByID=function(a){if(a=document.getElementById(a))a.style.display="none"};g.showByID=function(e){if(e=document.getElementById(e))e.style.display=a.localInfo.isIE6?"TD"==e.tagName?"table-cell":"TR"==e.tagName?"":"TABLE"==e.tagName?"":"block":""};g.clearByID=function(a){try{var c=document.getElementById(a);null!=c&&(c.innerHTML="")}catch(d){}};g.getHTMLSize=function(a,c){var d=document.createElement("div");d.style.position="absolute";d.style.left="-1000px";d.innerHTML=a;c.appendChild(d);
var b=d.offsetWidth,f=d.offsetHeight;d.parentNode.removeChild(d);return{w:b,h:f}};g.getElementsByClass=function(a,c,d){if(!a)return[];var b=[];d&&f(a,c)&&b.push(a);a=a.getElementsByTagName("*");for(d=0;d<a.length;d++)f(a[d],c)&&b.push(a[d]);return b||[]};g.getElementsByAttribute=function(a,c,d,b){var f=[];a=a.getElementsByTagName(c);for(c=0;c<a.length;c++)a[c].getAttribute(d)==b&&f.push(a[c]);return f};g.getElementPosition=function(e){if(!e)return{left:0,top:0,bottom:0,right:0};e=e.getBoundingClientRect();
var c=a.utils.viewport.getScroll(),d=e.left+c.left,c=e.top+c.top;return{left:d,top:c,right:d+e.width,bottom:c+e.height}};g.addClassToElement=function(a,c){if(a){var d=a.className?h(a):[],b=d.length,f=c.split(" "),g;for(g in f){var m=!1;if(!f[g])break;for(var q in d)if(d[q]===f[g]){m=!0;break}m||d.push(f[g])}d.length!==b&&(a.className=d.join(" "))}};g.removeClassFromElement=function(a,c,d){void 0===d&&(d=!1);if(a){for(var b=h(a),f=b.length-1;0<=f;f--)(b[f]===c||d&&-1!==b[f].indexOf(c))&&b.splice(f,
1);a.className=b.join(" ")}};g.getClassNames=h;g.isElementClass=f;g.cancelEvent=function(a){a&&("cancelable"in a?a.preventDefault():a.returnValue=!1)};g.createElement=function(a,c){var d=document.createElement("div");c=c||"";d.innerHTML="<"+a+' name="'+c+'" id="'+c+'"></'+a+">";return d.firstChild};g.setSize=function(e,c,d,f){if(null!=e&&null!=e.style){if(c){c=""+c;var g=0<c.indexOf("%");if(!isNaN(c)||g)g=""+(g?c:c+"px"),e.style.width!=g&&(e.style.width=g)}d&&(d=""+d,g=0<d.indexOf("%"),!isNaN(c)||
g)&&(g=""+(g?d:d+"px"),e.style.height!==g&&(e.style.height=g));if(f&&c&&d){if(null==e.style.zIndex||f)e.style.zIndex=(this._nextZIndex++).toString();f=b.viewport.getInnerSize();var g=a.utils.viewport.getScroll(),h=g.left;e.style.top=""+Math.max(0,g.top+Math.floor((f.h-d)/2))+"px";e.style.left=""+Math.max(0,h+Math.floor((f.w-c)/2))+"px";e.style.visibility=""}}};g.createHiddenIframe=function(e){var c=document.createElement("iframe");c.src=e;c.style.width="30px";c.style.height="10px";c.style.position=
"absolute";c.style.top="-1000px";c.style.left="-1000px";document.body?a.utils.DOM.appendToBody(c):a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(c)});return c};g.attributeEncode=function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}})(b.DOM||(b.DOM={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.callFunction=function(a,b){var d=eval(a),e=a.split(".");e.splice(e.length-1,1);e=eval(e.join("."));d.apply(e,b)};b.invokeOnPageLoad=function(b,f){if(!document.readyState&&document.body||"loaded"===document.readyState||"complete"===document.readyState||!f&&"interactive"===document.readyState&&document.body)b();else{var d=!1,e=function(){d||(d=!0,b())};window.setTimeout(e,2E4);a.utils.DOM.addEventListener(window,"load",e);a.utils.DOM.addEventListener(document,
"DOMContentLoaded",e)}};b.createAlias=function(a,b){for(var d=a.split("."),e=window,c=0;c<d.length-1;c++){var k=d[c];e[k]||(e[k]={});e=e[k]}e[d[d.length-1]]=b};b.debounce=function(a,b){var d=void 0;return function(){void 0!==d&&clearTimeout(d);d=setTimeout(function(){d=void 0;a()},b)}}})(b.functions||(b.functions={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(a,d,e,c){var b;"string"===typeof a?(b=parseInt(a),-1!==a.indexOf("%")&&(b=.01*parseInt(a)*d,c&&(b-=c/2))):b=a;b=Math.round(b);isNaN(b)&&void 0!==e&&(b=h(e,d,void 0,c));return b}b._openedWindows={};b._uniqueWindowCounter=0;b._calcPixels=h;b.open=function(f,d,e){e||(e={menubar:0,toolbar:0,resizable:1,scrollbars:1});e.width=h(e.width,screen.width,960);e.height=h(e.height,screen.height,680);e.left=h(e.left,screen.width,"50%",e.width);e.top=h(e.top,screen.height,
"50%",e.height);var c="",k;for(k in e)c+=","+k+"="+e[k];c=c.substr(1);e=a.localInfo.isIE&&2048<f.length||4096<f.length;k=f;e&&(k="",a.localInfo.isIE&&(k="about:blank"));d||(d="_gigWindow_"+(new Date).getTime()+"_"+ ++b._uniqueWindowCounter);(c=window.open(k,d,c))&&c.focus&&c.focus();b._openedWindows[d]=c;c=a.utils.URL.getParamsFromURL(f);e&&a.utils.HTTP.redirect(f.split("?")[0],[c],"POST",d);a.events.global.dispatch({eventName:"windowOpened",url:f,params:c});return null!=b._openedWindows[d]};b.close=
function(f){if(null!=b._openedWindows[f]){var d=function(){try{null!=b._openedWindows[f]&&b._openedWindows[f].close(),delete b._openedWindows[f]}catch(a){}};6<=a.localInfo.iosVersion?d():window.setTimeout(d,10)}}})(b.win||(b.win={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.isExplicitTrue=function(a){a=(""+a).toLowerCase();return"true"==a||"1"==a};a.isExplicitFalse=function(a){a=(""+a).toLowerCase();return"false"==a||"0"==a}})(a.validation||(a.validation={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(a,e,d){if(!e)return a;e=e.split(".");for(var b=0;b<e.length;b++){var f=e[b];d&&!a[f]&&(a[f]={});if(a[f]||!1===a[f])a=a[f];else return null}return a}function f(a,e,d,b,g,h){void 0===b&&(b=20);void 0===g&&(g=0);if(g>b||"undefined"==typeof a||null==a||"function"==typeof a&&d)return null;if(a.constructor==Array){for(var q=[],r=0;r<a.length;r++)d&&"function"==typeof a[r]||(q[r]=e?f(a[r],e,d,b,g+1,h):a[r]);return q}if("object"==typeof a){q={};for(r in a)h&&
"context"==r||d&&"function"==typeof a[r]||(q[r]=e?f(a[r],e,d,b,g+1,h):a[r]);return q}return a}function d(a,e){for(var b={},f=0;f<a.length;f++)if(a[f]&&a[f].length)for(var g=0;g<a[f].length;g++)for(var h in a[f][g])b[h]=a[f][g][h];else if(e)for(h in a[f])b[h]="object"!==typeof b[h]?a[f][h]:d([b[h],a[f][h]],!0);else for(h in a[f])b[h]=a[f][h];return b}function e(c,d,b){if(null!=c){null==d&&(d={});if(c.constructor==Array)for(var f=0;f<c.length;f++)e(c[f],d,b);else if(b){b=b.split("|");var f={},g;for(g in c)f[g.toLowerCase()]=
1;for(g=0;g<b.length;g++){var h=b[g];f[h.toLowerCase()]&&(d[h]=c[h])}}else d=a.utils.object.clone(c,!1);return d}}b.removeUndefined=function(a){var e={},d;for(d in a)null!=a[d]&&void 0!=a[d]&&(e[d]=a[d]);return e};b.getPropertyBySerializedName=h;b.setPropertyBySerializedName=function(a,e,d){e=e.split(".");var b=e.pop();h(a,e.join("."),!0)[b]=d};b.add=function(a,e,d){for(var b in e)d&&"undefined"!==typeof a[b]||(a[b]=e[b])};b.getHash=function(c){var e=[],d;for(d in c){var b;"object"==typeof c[d]?b=
a.utils.JSON.serialize(c[d],!1):c[d]&&(b=c[d].toString());e.push(d+"="+b)}return e.sort().join("&")};b.getMurmurHash=function(a,e){e||(e=0);var d,b,f,g,h;d=a.length&3;b=a.length-d;f=e;for(h=0;h<b;)g=a.charCodeAt(h)&255|(a.charCodeAt(++h)&255)<<8|(a.charCodeAt(++h)&255)<<16|(a.charCodeAt(++h)&255)<<24,++h,g=3432918353*(g&65535)+((3432918353*(g>>>16)&65535)<<16)&4294967295,g=g<<15|g>>>17,g=461845907*(g&65535)+((461845907*(g>>>16)&65535)<<16)&4294967295,f^=g,f=f<<13|f>>>19,f=5*(f&65535)+((5*(f>>>16)&
65535)<<16)&4294967295,f=(f&65535)+27492+(((f>>>16)+58964&65535)<<16);g=0;switch(d){case 3:g^=(a.charCodeAt(h+2)&255)<<16;case 2:g^=(a.charCodeAt(h+1)&255)<<8;case 1:g^=a.charCodeAt(h)&255,g=3432918353*(g&65535)+((3432918353*(g>>>16)&65535)<<16)&4294967295,g=g<<15|g>>>17,f^=461845907*(g&65535)+((461845907*(g>>>16)&65535)<<16)&4294967295}f^=a.length;f^=f>>>16;f=2246822507*(f&65535)+((2246822507*(f>>>16)&65535)<<16)&4294967295;f^=f>>>13;f=3266489909*(f&65535)+((3266489909*(f>>>16)&65535)<<16)&4294967295;
return(f^f>>>16)>>>0};b.clone=f;b.merge=d;b.unflatten=function(a){if(Object(a)!==a||Array.isArray(a))return a;var e={},d;for(d in a){for(var b=e,f="",g=d.split("."),h=0;h<g.length;h++)var r=!isNaN(Number(g[h])),b=b[f]||(b[f]=r?[]:{}),f=g[h];b[f]=a[d]}return e[""]||{}};b.flatten=function(a){function e(a,c){if(Object(a)!==a)d[c]=a;else if(Array.isArray(a)){for(var b=a.length,f=0;f<b;f++)e(a[f],c?c+"."+f:String(f));0===b&&(d[c]=[])}else{b=!0;for(f in a)b=!1,e(a[f],c?c+"."+f:f);b&&""!==c&&(d[c]={})}}
var d={};e(a,"");return d};b.extractProperties=e;b.extractProperty=function(a,d){return e(a,void 0,d)[d]}})(b.object||(b.object={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(f,d,e,c,k){var h=a.localInfo.pageDomain,n=b._getBaseDomain();null==c&&(c=0<n.length&&h.length>=n.length&&h.lastIndexOf(n)===h.length-n.length?n:h);e=null==e||""===e||isNaN(e)?47304E7:0==e?null:1E3*e;n=new Date;n.setTime(n.getTime()+e);c=f+"="+escape(d)+(k?"":"; path=/")+(null==e?"":"; expires="+n.toUTCString())+(c&&""!=c&&-1!=c.indexOf(".")?"; domain="+c:"");document.cookie=c;e&&!(0<e)||b.get(f)||(c=f+"="+escape(d)+(k?"":"; path=/")+(null==e?"":"; expires="+
n.toUTCString())+(h&&""!=h&&-1!=h.indexOf(".")?"; domain="+h:""),document.cookie=c)}b._getBaseDomain=function(){return a.partnerSettings&&a.partnerSettings.baseDomain?a.partnerSettings.baseDomain:""};b.get=function(a){a=a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1").replace(/^[ \t]+|[ \t]+$/g,"");return(a=document.cookie.match(new RegExp("(?:^|;)\\s?"+a+"=(.*?)(?:;|$)")))&&unescape(a[1])};b.set=h;b.remove=function(f){var d=a.localInfo.pageDomain,e=b._getBaseDomain();0<e.length&&d.length>=e.length&&
d.lastIndexOf(e)===d.length-e.length&&(h(f,"",-1,e),h(f,"",-1,e,!0));h(f,"",-1,a.localInfo.pageDomain);h(f,"",-1,a.localInfo.pageDomain,!0);h(f,"",-1,"");h(f,"",-1,"",!0)};b.getInfiniteExpirationTimeInSeconds=function(){return 47304E4}})(b.cookie||(b.cookie={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.sanitizeHTML=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/'/g,"&#39;").replace(/&#38;#173;/g,"&#173;")};a.sanitizeAttribute=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/\=/g,"&#61;")}})(a.sanitize||(a.sanitize={}))})(a.utils||(a.utils={}))})(gigya||
(gigya={}));(function(a){(function(a){(function(a){a.getPosition=function(){var a=0,b=0;if(document.body){var d=null,d={clientX:0,clientY:0};if(d.pageX||d.pageY)a=d.pageX,b=d.pageY;else if(d.clientX||d.clientY)a=d.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b=d.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:b}}}})(a.mouse||(a.mouse={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){var g=function(){function b(a,d){void 0===d&&(d="/");this.domain=a;this.path=d}b.prototype.isIn=function(a){return(this.domain==a.domain||this.isSubDomainOf(a))&&(!a.path||0==this.path.indexOf(a.path))};b.prototype.isForSubDomains=function(){return 0==this.domain.indexOf(".")};b.prototype.isSubDomainOf=function(b){var d="";b.isForSubDomains()||(d=".");d+=b.domain;return a.utils.stringUtils.endsWith(this.domain,d)};b.parse=function(a,d){void 0===d&&(d=!0);if(a){var e=document.createElement("a");
d&&0!=a.indexOf("http")&&(a="http://"+a);e.href=a;return new b(e.hostname,e.pathname)}};return b}();b.Uri=g})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.URLEncode=function(a){return encodeURIComponent(a)};b.URLDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};b.getParamsFromURL=function(b,f){return b&&-1!==b.indexOf("?")?a.utils.keyValue.deserialize(b.split("#")[0].split("?")[1],"&",f):{}};b.getParamValueFromURL=function(a,b,d){if(null==b||""==b)return d;var e=b.indexOf("?");if(-1===e)return d;e="&"+b.substr(e+1);b=e.toLowerCase().indexOf("&"+a.toLowerCase()+"=");if(-1===b)return d;a=e.substr(b+
(1+a.length+1))+"&";b=a.indexOf("&");return a.substr(0,b)};b.addParamsToURL=function(b,f){var d=a.utils.URL.getParamsFromURL(b);a.utils.object.add(d,f);var e=b.split("#"),d=e[0].split("?")[0]+"?"+a.utils.keyValue.serialize(d,"&");1<e.length&&(d+="#"+e[1]);return d}})(b.URL||(b.URL={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.serialize=function(b,f){var d=[];f||(f="&");for(var e in b)switch(typeof b[e]){case "function":break;case "array":case "object":null!=b[e]&&d.push(e+"="+a.utils.URL.URLEncode(a.utils.JSON.serialize(b[e])));break;case "undefined":break;default:d.push(e+"="+a.utils.URL.URLEncode(b[e]))}return d.join(f)};b.deserialize=function(b,f,d,e){var c={};if(!b)return c;f||(f="&");b=b.split(f);for(f=0;f<b.length;f++){var g=b[f],t=g.indexOf("=");if(-1===t){var n=d?g.toLowerCase():
g;c[n]="1"}else{n=g.substr(0,t);d&&(n=n.toLowerCase());g=g.substr(t+1).replace(/\+/g," ");try{c[n]=e?unescape(g):a.utils.URL.URLDecode(g)}catch(l){c[n]=unescape(g)}}}return c}})(b.keyValue||(b.keyValue={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(g){function h(a){return a.replace(/^http(s?):\/\/cdn(s?)[0-9]*.gigya.com\//,"http$1://cdn$2.gigya.com/")}function f(e,d,b,f,g,k){void 0===g&&(g=5E3);var p;0===e.indexOf("//")&&(e=a.localInfo.protocol+":"+e);if(f){f=h(e);if(c[f]){c[f].loaded?b&&b():(c[f].onLoad.push(b),c[f].onError.push(d));return}p=c[f]={loaded:!1,onLoad:[b],onError:[d]};k&&0<k.length&&a.utils.array.forEach(k,function(a){c[a]=p})}else p={loaded:!1,onLoad:[b],onError:[d]};d=function(){var d=document.createElement("script");
d.async=!0;d.type="text/javascript";d.charset="UTF-8";var b=!1,f=function(){if(!b){if(p.onLoad&&p.onLoad.length)for(var a=0;a<p.onLoad.length;a++)if("function"===typeof p.onLoad[a])p.onLoad[a]();p.loaded=!0;p.onError=p.onLoad=null;b=!0;!0===g&&(g=0);!1!==g&&setTimeout(function(){d.parentNode&&d.parentNode.removeChild(d)},g)}};d.onload=f;d.onreadystatechange=function(){"loaded"===this.readyState&&f()};d.onerror=function(){for(var a=0;a<p.onError.length;a++)if("function"===typeof p.onError[a])p.onError[a]();
delete c[e]};var k=document.getElementsByTagName("head");k&&0<k.length&&k[0].appendChild(d);k=function(){d.src=e};6<=a.localInfo.iosVersion?k():setTimeout(k,1)};a.localInfo.isIE?a.utils.functions.invokeOnPageLoad(d):d()}function d(a,c){var e=new Image,d=!1;e.onload=e.onerror=function(){d||(d=!0,c())};e.src=a}function e(c,e,d){void 0===d&&(d=5E3);var f=document.createElement("iframe");f.style.width="30px";f.style.height="10px";f.style.position="absolute";f.style.top="-1000px";f.style.left="-1000px";
!0===d&&(d=0);var g=function(a){var c;c=a&&a.srcElement?a.srcElement:a&&a.target?a.target:this;!c.loaded&&c.parentNode&&(c.loaded=!0,e(),!1!==d&&window.setTimeout(function(){try{document.body.removeChild(c)}catch(a){}},d))};b.DOM.addEventListener(f,"load",g);b.DOM.addEventListener(f,"error",g);f.onload=function(a){g(a)};f.onerror=g;f.src=c;a.utils.DOM.appendToBody(f)}var c={};g.isLoaded=function(a){a=h(a);return Boolean(c[a]&&c[a].loaded)};g.load=f;(function(a){a[a.script=0]="script";a[a.image=1]=
"image";a[a.iframe=2]="iframe"})(g.ResourceTypes||(g.ResourceTypes={}));var k=g.ResourceTypes;g.triggerResource=function(a,c,b,g){void 0===b&&(b=k.image);void 0===g&&(g=5E3);switch(b){case k.script:f(a,c,c,!1,g);break;case k.image:d(a,c);break;case k.iframe:e(a,c,g);break;default:throw Error("Unsupported resource type");}};g.loadService=function(c,e,d){var b=a._.getCdnResource()+"/js/gigya.services."+c+".js";f(b,function(){"object"===typeof console&&console.error&&(console.error("error loading gigya service "+
c+" from url: "+b),e&&e())},d,!0)}})(b.script||(b.script={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));var __extends=this&&this.__extends||function(a,b){function g(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};
(function(a){(function(b){(function(b){function h(a){for(var c,e=0,f=b.adapters;e<f.length;e++){var k=f[e];if(k.isAvailable()&&(!(k.prototype instanceof d)||a)){c=new k;break}}c||(c=new l);a&&(c instanceof d?c.waitForService(function(){a(c)}):a(c));return c}var f=function(){function c(){}c.prototype.setObject=function(c,e){this.setItem(c,a.utils.JSON.serialize(e))};c.prototype.getObject=function(c){return a.utils.JSON.deserialize(this.getItem(c))};c.prototype.isPersistent=function(){return!0};return c}();
b.AbstractLocalStorageAdapter=f;var d=function(a){function c(){a.call(this);this.isLoaded=!1}__extends(c,a);c.prototype.isReady=function(){return this.isLoaded};c.prototype.waitForService=function(a){var c=this;this.isReady()?a():setTimeout(function(){return c.waitForService(a)},50)};return c}(f);b.AbstractAsyncLocalStorageAdapter=d;var e=function(c){function e(){c.call(this);this.storage=window.localStorage}__extends(e,c);e.isAvailable=function(){return a.localInfo.supportsLocalStorage};e.prototype.getItem=
function(a){return this.storage[a]};e.prototype.setItem=function(a,c,e){try{this.storage[a]=c}catch(d){}};e.prototype.removeItem=function(a){this.storage.removeItem(a)};return e}(f),c=function(c){function e(){c.call(this);this.storage=window.sessionStorage}__extends(e,c);e.isAvailable=function(){return a.localInfo.supportsSessionStorage};return e}(e),k=function(c){function e(){c.apply(this,arguments)}__extends(e,c);e.isAvailable=function(){return a.localInfo.isFF&&window.globalStorage};e.prototype.getItem=
function(a){return window.globalStorage[location.hostname][a]};e.prototype.setItem=function(a,c,e){try{window.globalStorage[location.hostname][a]=c}catch(d){}};e.prototype.removeItem=function(a){delete window.globalStorage[location.hostname][a]};return e}(f),t=function(c){function e(){var a=this;c.call(this);this.loadSwfStore(function(c){a.isLoaded=!0})}__extends(e,c);e.isAvailable=function(){return a.localInfo.supportsFlash};e.prototype.loadSwfStore=function(c){var e=this;window.SwfStore?this.initializeSwfStore(function(){return e.loadSwfStore(c)}):
a.utils.script.load("https://cdns.gigya.com/gs/js/swfstore.min.js",function(){console.log("Failed to load Gigya SwfStore.");c(!1)},function(){e.initializeSwfStore(c)},!0)};e.prototype.initializeSwfStore=function(a){this.swfStore=new SwfStore({namespace:"gigSSO",swf_url:"https://cdns.gigya.com/gs/swf/swfstore.swf",onready:function(){a(!0)},onerror:function(){console.log("Failed to initialize Gigya SwfStore.");a(!1)}})};e.prototype.getItem=function(a){return this.swfStore.get(a)};e.prototype.setItem=
function(a,c,e){this.swfStore.set(a,c)};e.prototype.removeItem=function(a){this.swfStore.clear(a)};return e}(d),n=function(c){function e(){c.apply(this,arguments)}__extends(e,c);e.isAvailable=function(){return!0};e.prototype.getItem=function(c){return a.utils.cookie.get(c)};e.prototype.setItem=function(c,e,d){a.utils.cookie.set(c,e,d)};e.prototype.removeItem=function(c){a.utils.cookie.remove(c)};return e}(f),l=function(a){function c(){a.call(this);this.memory={}}__extends(c,a);c.isAvailable=function(){return!0};
c.prototype.getItem=function(a){return this.memory[a]};c.prototype.setItem=function(a,c,e){this.memory[a]=c};c.prototype.removeItem=function(a){delete this.memory[a]};c.prototype.isPersistent=function(){return!1};return c}(f);b.adapters=[e,c,k,t,n];b.waitForService=h;var m=h();b.getItem=function(a){return m.getItem(a)};b.setItem=function(a,c,e){return m.setItem(a,c,e)};b.removeItem=function(a){return m.removeItem(a)};b.setObject=function(a,c){return m.setObject(a,c)};b.getObject=function(a){return m.getObject(a)}})(b.localStorage||
(b.localStorage={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(c){c=a.utils.object.clone(c);var b=function(){var b=c.data.split("="),f=e[b[0]];if(null!=f){if("function"==typeof f.callback){var g=unescape(b[1]),g=a.utils.keyValue.deserialize(g,null,null,!0);f.callback(g,f.context)}d(b[0]);(b=document.getElementById(b[0]))&&b.parentElement&&b.parentElement.removeChild(b)}};c&&c.data&&c.data.split&&(6<=a.localInfo.iosVersion?b():window.setTimeout(b,100))}function f(c){var e=document.createElement("iframe");e.style.width=
"30px";e.style.height="10px";e.style.position="absolute";e.style.top="-1000px";e.style.left="-1000px";e.id=c;e.src="https://cdns.gigya.com/gs/LocalStorageListener.htm?mode=receive&id="+encodeURIComponent(c);a.utils.DOM.appendToBody(e);return e}function d(a){delete e[a]}var e={};b._flashListenerID="flid"+(new Date).getTime();var c=!1,k={};b._onFlashMessage=function(c){c=a.utils.keyValue.deserialize(c,null,null,!0);var b=c.id,f=e[b];null!=f&&("function"==typeof f.callback&&f.callback(c,f.context),d(b))};
b.addMessageListener=function(d,n,l,m){e[d]={callback:m,context:n,t:(new Date).getTime()};n=a.localInfo.messagingMethod;a.localInfo.isIE11&&l&&window.indexedDB&&(n=a._.MessagingMethod.LocalStorageListener);if(n==a._.MessagingMethod.LocalStorageListener||n==a._.MessagingMethod.PostMessage)n==a._.MessagingMethod.LocalStorageListener&&l&&f(d),c||(d=function(a){if(a&&a.data&&"string"===typeof a.data){var c=a.data.split("=")[0];e[c]&&h(a)}},window.addEventListener?window.addEventListener("message",d,!1):
window.attachEvent&&window.attachEvent("onmessage",d),c=!0);else{var q="localstorage";a.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=a.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(q=a.thisScript.globalConf.legacyCrossSiteMethod);k[q]||window.setTimeout(function(){var c=document.createElement("div");c.style.width="1px";c.style.height="1px";c.style.overflow="hidden";c.style.position="absolute";c.style.left="-1000px";var e=b._flashListenerID;"localstorage"!=q&&(e=q+":"+
b._flashListenerID);var d=a.localInfo.protocol+"://"+document.location.href.split("?")[0].split("#")[0].split("/")[2],f=(new Date).getTime(),h=document.createElement("object");h.setAttribute("id","eventsBroadcaster"+f);h.setAttribute("codebase","https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0");h.setAttribute("width","50");h.setAttribute("height","50");h.setAttribute("src","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");h.setAttribute("data","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");
h.setAttribute("style","display:inline");f=document.createElement("param");f.name="movie";f.setAttribute("value","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");h.appendChild(f);f=document.createElement("param");f.setAttribute("name","allowScriptAccess");f.setAttribute("value","always");h.appendChild(f);f=document.createElement("param");f.setAttribute("name","FlashVars");f.setAttribute("value","action=listen&id="+e+"&eventName=loginComplete&callback=gigya.utils.xd._onFlashMessage&domain="+
d);h.appendChild(f);c.appendChild(h);a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(c);h.setAttribute("type","application/x-shockwave-flash");h.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")});k[q]=!0},500)}};b.removeMessageListener=d})(b.xd||(b.xd={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){var h;try{h=Boolean(window.sessionStorage)}catch(f){h=!1}b.set=function(b,e){if(h){var c;try{(c=a.utils.JSON.deserialize(window.sessionStorage.getItem("gigyaCache")))||(c={}),null==e&&c[b]?delete c[b]:c[b]={response:e,time:(new Date).getTime()},window.sessionStorage.setItem("gigyaCache",a.utils.JSON.serialize(c))}catch(f){}a.utils.queue.release("cache","cache_"+b)}};b.get=function(b,e,c){if(h)try{if(!a.utils.queue.isActive("cache_"+b)){var f=window.sessionStorage.getItem("gigyaCache"),
g=a.utils.JSON.deserialize(f),n=g?g[b]:null;if(n){if(e&&e+n.time>(new Date).getTime()){c(n.response);return}a.utils.sessionCache.remove(b);n=null}if(!n){a.utils.queue.hold("cache","cache_"+b);c(null);return}}a.utils.queue.isActive("cache_"+b)&&a.utils.queue.waitFor("cache_"+b,a.utils.sessionCache.get,arguments)}catch(l){c(null)}else"function"==typeof c&&c(null)};b.remove=function(b){a.utils.sessionCache.set(b,null)}})(b.sessionCache||(b.sessionCache={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){var h=navigator.userAgent.toLowerCase(),f=null;b.isModern=function(){return a.localInfo.isChrome||a.localInfo.isFF||a.localInfo.isOpera||a.localInfo.isIOSWebView||a.localInfo.isIE&&9<=a.utils.browser.getVersion()||a.localInfo.isEdge||a.localInfo.isSafari&&4<=a.utils.browser.getVersion()||a.localInfo.isGoogleBot};b.getVersion=function(){if(f)return f;try{var a=h.match(/(opera|chrome|safari|firefox|msie|trident.*rv:)\/?\s*(\.?\d+(\.\d+)*)/i);if(a[2]){var e=a[2].split(".")[0];
if(!isNaN(parseInt(e)))return f=parseInt(e)}}catch(c){}return 0}})(b.browser||(b.browser={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(a){if(!f[a])return!1;for(var e in f[a].ids)return!0;return!1}var f={};b._servicesStatus=function(){var a={},e;for(e in f)h(e)?a[e]={active:!0,waitingFor:f[e].ids,queuedCount:f[e].q.length}:a[e]={active:!1};return a};b.isActive=h;b.release=function(a,e){if(f[e]&&(delete f[e].ids[a],!h(e))){var c=f[e].q;for(f[e].q=[];0<c.length;){var b=c.splice(0,1)[0];try{b.func.apply(this,b.args)}catch(g){"object"==typeof console&&console.log&&console.log("Gigya: Exception while invoking queued method ("+
e+": "+a+")")}if(h(e)){f[e].q=c;break}}}};b.hold=function(a,e){f[e]||(f[e]={q:[],ids:{}});f[e].ids[a]=!0};b.waitFor=function(a,e,c){f[a]||(f[a]={q:[],ids:{}});f[a].q.push({func:e,args:c})};b.queueForExecution=function(b,e,c){c=c||[];a.utils.queue.isActive(b)?a.utils.queue.waitFor(b,e,c):e.apply(this,c)}})(b.queue||(b.queue={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.redirect=function(b,f,d,e){if(d&&"post"==d.toLowerCase()){d=document.createElement("form");var c=[];d.setAttribute("accept-charset","UTF-8");d.setAttribute("method","POST");d.setAttribute("action",b);e&&d.setAttribute("target",e);b=a.utils.object.merge(f);for(var g in b)"boolean"!=typeof b[g]&&"string"!=typeof b[g]||"eventName"==g||c.push('<textarea name="'+encodeURIComponent(g)+'">'+b[g].toString().replace(/\&/g,"&amp;")+"</textarea>");d.innerHTML=c.join("");
d.style.display="none";a.utils.DOM.appendToBody(d);d.submit()}else{d=b.split("?");b=d[0];e={};if(1<d.length)for(d=d[1].split("&"),c=0;c<d.length;c++){var t=d[c].split("=");e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}for(d=0;d<f.length;d++)for(g in c=f[d],c)"boolean"!=typeof c[g]&&"number"!=typeof c[g]&&"string"!=typeof c[g]||"eventName"==g||(e[g]=c[g]);f=[];for(g in e)f.push(g+"="+encodeURIComponent(e[g]));document.location.href=b+"?"+f.join("&")}}})(b.HTTP||(b.HTTP={}))})(a.utils||(a.utils=
{}))})(gigya||(gigya={}));(function(a){(function(b){(function(b){b.onHotKeyClicked=function(b,f){a.utils.DOM.addEventListener(b.elementContext?b.elementContext:document.body,"keyup",function(a){a.which==b.key&&f()})}})(b.keyboard||(b.keyboard={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));(function(a){a.socialize={};a.gcs={};a.gm={};a.comments={};a.accounts={};a.chat={};a.gscounters={}})(gigya||(gigya={}));
(function(a){(function(b){var g={};b.getApi=function(a){return g[a]};var h=function(){function b(a,e){this.methodName=a;this.settings=e;this.addAlias();g[a]=this}b.prototype.preprocessRequest=function(a,b){this.settings.preprocessor?this.settings.preprocessor(a,b):b()};b.prototype.addAlias=function(){var b=this;a.utils.functions.createAlias("gigya."+this.methodName,function(){for(var e=[],c=0;c<arguments.length;c++)e[c-0]=arguments[c];var f=a.utils.object.merge([e]),e=function(){var c=a.utils.object.merge([a.thisScript.globalConf,
f]);b.run(c)};a.thisScript&&a.thisScript.globalConf?e():a.utils.queue.queueForExecution("API",e)})};return b}();b.BaseApi=h})(a._||(a._={}))})(gigya||(gigya={}));(function(a){a.defaultEventMaps=a.defaultEventMaps||[]})(gigya||(gigya={}));
(function(a){(function(b){function g(a){return"on"===a.substring(0,2)?a:"on"+a.substring(0,1).toUpperCase()+a.substring(1)}function h(b,d){var e;try{"function"==typeof b?e=b(d):b instanceof Array?a.utils.array.forEach(b,function(c){"function"==typeof c?c(d):a.log.addLog("Not a function registered to event: "+c,c)}):a.log.addLog("Not a function or function array registered to event",b)}catch(c){a.log.addLog("Error invoking function registered to event",b)}return e}(function(b){function d(c,b,e,d){var f=
function(c){var e=0;c.cancel||(e=a.events.global.dispatch(c,b));d&&d(e)};e?e(c,f):f(c)}var e={},c={};b._activeNamespaces={};b.add=function(b,f,h,l,m,q){void 0===h&&(h="other");void 0===m&&(m="socialize");b=m+"_"+g(b);e[b]||(e[b]=[]);f={handler:f,type:h,context:l,params:q,fullEventName:b};e[b].push(f);!this._activeNamespaces[m]&&a._.apiAdapter&&a._.apiAdapter.registerForNamespaceEvents(m);this._activeNamespaces[m]=1;if((m=c[b])&&"other"==h)for(c[b]=[],h=0;h<m.length;h++)b=m[h],d(b.eventObj,b.params,
b.preProcess);return f};b.remove=function(c,b){e[c]&&a.utils.array.removeByValue(e[c],b)};b.dispatch=function(c,b){var d=0,f=c.isInternal,h=c.eventName.split(",");a.log.addLog('Dispatching global event "'+c.eventName+'" with this event object',c);for(var q=0;q<h.length;q++){var r=h[q].split("."),p=1<r.length?r.shift():"socialize",u=r[0],r=g(u),v=a.utils.object.clone(e[p+"_"+r]);v||(v=[]);r=a.utils.object.clone(c);r.isGlobal=!0;r.eventName=u;b&&(b.source&&(r.source=b.source),b.sourceData&&(r.sourceData=
b.sourceData),b.context&&(r.context=b.context));u=["component"];f||u.push("other");for(var w=0;w<u.length;w++)for(var A=u[w],x=0;x<v.length;x++){var z=v[x];if(z.type==A){var y=a.utils.object.clone(r);null==y.context&&null!=z.context&&(y.context=z.context);null==y.context&&delete y.context;"component"!=A&&(d++,a._.handleSpecialFields(y));z.params&&z.params.signKey&&(y.UIDSignature=c.signKeysUIDSignature[z.params.signKey],delete y.signKeysUIDSignature);try{z.handler(y)}catch(B){a.log.addLog('Error while trying to invoke "'+
c.eventName+'" global event handler',B)}}}f||a.events._dispatchFromMaps(r,!0);v=window.GenesisExchange_Gigya;u=window.gigya_omniture_conf;w=window.myOmnitureIntegrationFunc;f||"undefined"==typeof v||"undefined"==typeof u||"socialize"!=p||((new v(u)).processAction(r),"undefined"!=typeof w&&w(u,r))}return d};b.dispatchWhenHandlerAdded=function(a,b,e){void 0===b&&(b={});var f=a.eventName.split("."),g=1<f.length?f.shift():"socialize",h=f[0];d(a,b,e,function(d){0==d&&(d="on"+h.substring(0,1).toUpperCase()+
h.substring(1),d=g+"_"+d,c[d]||(c[d]=[]),c[d].push({eventObj:a,params:b,preProcess:e}))})};b.getEventsForOperation=function(a){var c=[];-1!=a.toLowerCase().indexOf("login")?(this._activeNamespaces.socialize&&c.push("socialize.login"),this._activeNamespaces.accounts&&c.push("accounts.login")):-1!=a.toLowerCase().indexOf("addconnection")&&this._activeNamespaces.socialize&&c.push("socialize.connectionAdded");return c.join(",")}})(b.global||(b.global={}));b.addMap=function(b){a.defaultEventMaps.splice(0,
0,b)};b.dispatchErrorFromResponse=function(b,d,e){d||(d={});var c=d;c.response&&(c=c.response);d={eventName:"error",status:c.status?c.status:"FAIL",statusMessage:c.statusMessage?c.statusMessage:"General Server Error",errorMessage:c.errorMessage?c.errorMessage:"General Server Error",errorDetails:c.errorDetails?c.errorDetails:"",errorCode:c.errorCode?c.errorCode:500001,response:d};a.utils.object.add(d,e);a.events.dispatchForWidget(d,b)};b.dispatchInvalidParamError=function(b,d){var e={eventName:"error"};
"undefined"==typeof b[d]||null==b[d]?(e.errorCode=400002,e.errorMessage="Missing_required_parameter ("+d+")"):(e.errorCode=400006,e.errorMessage="Invalid_parameter_value ("+d+")");e.status=e.errorCode;e.statusMessage=e.errorMessage;a.events.dispatchForWidget(e,b)};b.dispatchForWidget=function(b,d){if(b&&b.eventName){var e=b.eventName;a.log.addLog('Dispatching widget event "'+e+'" for '+d.lastSource+" with this event object",b);a._.handleSpecialFields(b);for(var c=e.split(","),k,t=0;t<c.length;t++){var e=
c[t],n=g(e);d&&(d.context&&(b.context=d.context),d.source&&(b.source=d.source),d.sourceData&&(b.sourceData=d.sourceData),d.containerID&&(b.sourceContainerID=d.containerID),d.instanceID&&(b.instanceID=d.instanceID));d[n]&&(k=h(d[n],b));"undefined"===typeof k&&(k=!0);if(-1==e.indexOf("login")&&-1==e.indexOf("logout")&&"connectionRemoved"!=e&&"connectionAdded"!=e){this._dispatchFromMaps(b);var e=window.GenesisExchange_Gigya,n=window.gigya_omniture_conf,l=window.myOmnitureIntegrationFunc;"undefined"!=
typeof e&&"undefined"!=typeof n&&((new e(n)).processAction(b),"undefined"!=typeof l&&l(n,b))}}return k}};b.dispatchEventObject=h;b._dispatchFromMaps=function(b,d){for(var e=[],c=!1,g=0;g<a.defaultEventMaps.length;g++){for(var h=a.defaultEventMaps[g].eventMap,n=a.defaultEventMaps[g].defaultMethod,l=0;l<h.length;l++){var m=h[l],q=[];m.args||(m.args=[]);for(var r=0;r<m.args.length;r++)"$event"==m.args[r]?q.push(b):q.push(a.utils.templates.fill(m.args[r],b));m.events.split(",");r=","+m.events.toLowerCase()+
",";-1==r.indexOf(",*,")&&(-1==r.indexOf(",on"+b.eventName.toLowerCase()+",")&&-1==r.indexOf(","+b.eventName.toLowerCase()+",")||(b.source||m.sources)&&m.sources&&-1==m.sources.indexOf(b.source))||(e.push(m),(m.method?m.method:n).apply(this,q),m.override&&(c=!0))}if(c)break}}})(a.events||(a.events={}))})(gigya||(gigya={}));
(function(a){(function(b){var g=function(g){function f(a,b,c,f,t,n){void 0===f&&(f={});void 0===t&&(t={});g.call(this,a,f);this.schema=b;this.requiresSession=c;this.settings=f;this.adapterSettings=t;this.altSessionParams=n;"undefined"===typeof t.requiresSession&&(t.requiresSession=function(){return c})}__extends(f,g);f.prototype.run=function(d){var e=this;d.ignoreApiQueue?(new b.ServerApiRequest(e,d)).start():a.utils.queue.queueForExecution("API",function(){(new b.ServerApiRequest(e,d)).start()})};
return f}(b.BaseApi);b.ServerApi=g})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){function g(a){return{status:"OK",statusMessage:"",errorCode:0,statusCode:0,errorMessage:"",errorDetails:"",statusReason:"",originalResponse:a}}var h;a.events.global.add("onFBCRefreshed",function(){h=!1},"component");var f;(function(a){a[a._unknown=0]="_unknown";a[a.facebook=1]="facebook";a[a.yahoo=2]="yahoo";a[a.googleplus=3]="googleplus";a[a.linkedin=4]="linkedin";a[a.samlProvider=5]="samlProvider";a[a.samlSession=6]="samlSession"})(f||(f={}));var d=function(){function e(c,
b){this.api=c;this.params=a.utils.object.merge([a.utils.object.clone(b),c.settings.defaultParams]);this.originalParams=a.utils.object.clone(b);this.callback=b.callback}e.prototype.start=function(){var c=this;b.apiAdapter.isSessionValid(this.params,function(b){!c.api.adapterSettings.requiresSession()||b||c.doesHaveAltSessionParam()?c.sendRequest(b):c.afterServerApiResponse(a.utils.object.clone({status:"FAIL",errorMessage:"Unauthorized user",statusMessage:"Unauthorized user",errorCode:403005}),!1)})};
e.prototype.sendRequest=function(c){var e=this,d=a.utils.object.merge([this.api.adapterSettings,{cacheTimeout:this.params.cacheTimeout,forceGigyaDomain:!c&&this.api.adapterSettings.forceGigyaDomain}]);this.beforeRequest(c,function(f){f?e.afterServerApiResponse(f,c):(a.events.global.dispatch({eventName:"beforeRequest",methodName:e.api.methodName,rawParams:e.originalParams,params:e.params},e.originalParams),e.api.settings.oauth?b.apiAdapter.sendOauthRequest(e.api.methodName,e.params,function(a){e.afterServerApiResponse(a,
c)},d):b.apiAdapter.sendRequest(e.api.methodName,e.params,function(a){e.afterServerApiResponse(a,c)},d))})};e.prototype.beforeRequest=function(c,e){var d=this;a.external.backplane.isLoaded()&&!a.external.backplane._ready&&b.loginMethods[this.api.methodName]?a.external.backplane.executeOnInit(function(){d.beforeRequest(c,e)}):(a._.logoutMethods[this.api.methodName]&&(!c&&!this.params.regToken||a.partnerSettings.ssoLogoutUrl&&document.location.href==a.partnerSettings.ssoLogoutUrl)&&e(g(null)),this.handleDeprecatedParams(),
this.handleCollections(),this.handleConnectWithoutLoginBehavior(c),this.params.extraPermissions=this.params[this.params.provider+"ExtraPermissions"]||this.params.permissions,this.api.preprocessRequest(this.params,function(){d.setOverridableParams(function(){d.setNonOverridableParams(c,function(){d.filterParams(d.params);a.log.logCall(d.api.methodName,d.originalParams,d.originalParams.lastSource);e()})})}))};e.prototype.setOverridableParams=function(c){a.utils.object.merge([{},this.params]);c()};e.prototype.doesHaveAltSessionParam=
function(){if(this.api.altSessionParams){for(var a=this.api.altSessionParams.split("|"),b=0;b<a.length;b++)if(this.params[a[b]])return!0;return!1}};e.prototype.setNonOverridableParams=function(c,e){if(null!=this.params.APIKey){var d=a.utils.cookie.get("gltexp_"+this.params.APIKey);null!=d&&(this.params.loginTokenExp=d)}(d=a.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(c||b.loginMethods[this.api.methodName])&&(this.params.refUID=d);if(a.providersConfig.facebook&&!h){var d=a.external.facebook.getParams(),
f;for(f in d)this.params[f]=d[f];h=!0}0===this.api.methodName.indexOf("accounts.")&&(a.events.global._activeNamespaces.socialize&&null==this.params.includeUserInfo&&(this.params.includeUserInfo=!0),this.params.include=this.params.include?this.params.include+",":"profile,data");"accounts.getSchema"===this.api.methodName&&(this.params.includeDynamicSchema="clientOnly");(f=a.external.backplane.getChannelId())&&(this.params.bp_channel_url=f);this.params.targetEnv="jssdk";e()};e.prototype.handleDeprecatedParams=
function(){this.params.pendingRegistration?this.params.pending_registration=this.params.pendingRegistration:this.params.newUsersPendingRegistration&&(this.params.pending_registration=this.params.newUsersPendingRegistration);this.params.alwaysForceAuthentication&&(this.params.forceAuthentication=!0);this.params.timestamp&&(this.params.UIDTimestamp=this.params.timestamp,delete this.params.timestamp);this.params.signature&&0===this.api.methodName.indexOf("socialize.")&&(this.params.UIDSig=this.params.signature,
delete this.params.signature);this.params.nonce&&(this.params.UIDNonce=this.params.nonce,delete this.params.nonce);this.params.format&&!this.params.dataFormat&&(this.params.dataFormat=this.params.format,delete this.params.format)};e.prototype.handleCollections=function(){this.params.recipients&&(this.params.recipients=this.extractListOfGIGUIDs(this.params.recipients));if(this.params.friends){var a=this.extractListOfGIGUIDs(this.params.friends);0<this.params.UIDs.length&&(this.params.UIDs+=",");this.params.UIDs+=
a}};e.prototype.extractListOfGIGUIDs=function(c){var b=this;switch(typeof c){case "string":return c;case "object":if("undefined"!==typeof c.UID)return c.UID;if(c instanceof a.socialize.Collection){var e=[];c.each(function(a,c){var d=b.extractListOfGIGUIDs(a);null!=d&&""!=d&&e.push(d)});return e.join(",")}}};e.prototype.handleConnectWithoutLoginBehavior=function(a){if("socialize.addConnection"===this.api.methodName){var e=this.params.connectWithoutLoginBehavior;"string"===typeof e&&(e=e.toLowerCase());
"loginexistinguser"===e&&(this.params.loginIfExists=!0);a||(this.api=b.getApi("socialize.login"),"alwayslogin"!==e&&(this.params.temporary_account=!0))}};e.prototype.filterParams=function(c){this.params=a.utils.object.extractProperties(c,{},this.getFullSchema())};e.prototype.getFullSchema=function(){if(null==this.api.schema)return"";for(var c=(this.api.schema+"|"+a._.defaultApiSchema).split("|"),b=0;b<c.length;b++){var e=c[b];if(-1!==e.toLowerCase().indexOf("[providercapability=")){for(var d=e.toLowerCase().split("=")[1].split("]")[0],
e=e.split("]")[1],d=a.socialize.getProvidersForRequiredCapabilities(a.socialize.getProvidersByName("*"),[d]),f=[],g=0;g<d.length;g++)f.push(d[g].name+e);c[b]=f.join("|")}}return c.join("|")};e.prototype.preprocessServerResponse=function(c){c.userInfo&&0!==this.api.methodName.indexOf("accounts.")&&("string"===typeof c.userInfo&&(c.userInfo=a.utils.JSON.parse(c.userInfo)),c.userInfo&&(c=a.utils.object.merge([c.userInfo,c]),c.errorCode=c.userInfo.errorCode,delete c.userInfo));c.accountInfo&&"string"===
typeof c.accountInfo&&(c.accountInfo=a.utils.JSON.parse(c.accountInfo),c.accountInfo&&(c=a.utils.object.merge([c.accountInfo,c]),delete c.accountInfo));try{c.settings&&"string"==typeof c.settings&&(c.settings=a.utils.JSON.parse(c.settings))}catch(b){}return c};e.prototype.onAfterLogoutMethod=function(){a.external.backplane.resetChannel()};e.prototype.getExpiredSessionResponse=function(a){switch(this.api.methodName){case "socialize.setUserSettings":this.originalParams.disableLocalSettings||(b.setGigyaSettings(this.params.group,
this.params.settings),a=g(a));break;case "socialize.delUserSettings":this.originalParams.disableLocalSettings||(b.delGigyaSettings(this.params.group),a=g(a));break;case "socialize.getUserSettings":if(!this.originalParams.disableLocalSettings){var e=b.getGigyaSettings(this.params.group);a=g(a);a.settings=e}break;case "socialize.getUserInfo":a.status="OK";a.statusMessage="";a.errorCode=0;a.statusCode=0;a.errorMessage="";a.errorDetails="";a.statusReason="";break;case "accounts.logout":case "socialize.logout":a=
g(a)}return a};e.prototype.afterServerApiResponse=function(c,e){var d=this;b.checkCompleteRegistration(c,this.originalParams,function(f,g,h){c=f;c=d.preprocessServerResponse(c);if(b.logoutMethods[d.api.methodName]&&0==c.errorCode&&c.logoutActiveSession)d.onAfterLogoutMethod();403005==c.errorCode&&(c=d.getExpiredSessionResponse(c));0==c.errorCode&&(e||b.loginMethods[d.api.methodName])&&a.utils.cookie.remove("_gigRefUid_"+d.originalParams.APIKey);d.handleMethodResponse(c,function(f){c=f;d.addDefaultResponseProperties(c);
b.handleSpecialFields(c);d.logoutFromProvidersIfNeeded(c,function(b){b?d.sendRequest(e):(g||d.generateEventsFromResponse(c,e),h?d.sendRequest(e):(a.events.global.dispatch({eventName:"afterResponse",methodName:d.api.methodName,filteredParams:d.params,response:c},d.originalParams),"function"===typeof d.callback&&(a.log.addLog("Calling callback for "+d.api.methodName+" with this response object",c),d.callback(c)),d.api.settings.postprocessor&&d.api.settings.postprocessor(d.originalParams,c)))})})})};
e.prototype.addDefaultResponseProperties=function(a){delete a.statusCode;delete a.statusReason;a.errorCode=a.errorCode||0;a.status=a.status||(0==a.errorCode?"OK":"FAIL");a.errorMessage=a.errorMessage||"";a.statusMessage=a.statusMessage||a.errorMessage;a.requestParams=this.originalParams;a.requestParams.password&&delete a.requestParams.password;a.context=this.originalParams.context;var b=this.api.methodName.split(".")[0];a.operation="socialize"==b?this.api.methodName.split(".")[1]:"/"+this.api.methodName};
e.prototype.handleMethodResponse=function(c,e){if(0==c.errorCode)switch(this.api.methodName){case "accounts.socialLogin":case "socialize.login":c.newUser=c.x_newUser?!0:!1,delete c.x_newUser;case "socialize.notifyLogin":case "socialize.addConnection":case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "socialize.getUserInfo":delete c.login_token;delete c.expires_in;delete c.id;c.code&&(c.authCode=c.code,delete c.code);if(!(c.authCode||
"socialize.notifyLogin"==this.api.methodName&&this.params.authCode)){var d=c;c.userInfo&&(d=c.userInfo,delete c.userInfo);-1==this.api.methodName.indexOf("accounts.")?(c={user:d},a.utils.object.extractProperties(d,c,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|settings|context|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|newUser|signKeysUIDSignature"),c.user.hasOwnProperty("UIDSig")&&(c.signature=c.user.UIDSig),d.profile&&delete d.profile,d.data&&delete d.data,
delete d.status,delete d.statusMessage,delete d.callId,delete d.errorCode,delete d.errorMessage,delete d.errorDetails,delete d.settings,delete d.context):c!=d&&(c.user=d);""==d.age||isNaN(parseInt(d.age))||(d.age=parseInt(d.age));d.suppressEvents&&(c.suppressEvents=!0);if("string"==typeof d.capabilities){var f=d.capabilities;f||(f="");"object"!=typeof d.capabilities&&(d.capabilities={});f=f.toLowerCase();d.capabilities={actions:-1<f.indexOf("actions"),friends:-1<f.indexOf("friends"),login:-1<f.indexOf("login"),
status:-1<f.indexOf("status"),notifications:-1<f.indexOf("notifications"),contacts:-1<f.indexOf("contacts"),photos:-1<f.indexOf("photos")}}b.convertIdentitiesArrayToObject(d);"string"==typeof d.providers&&(d.providers=d.providers.split(","));this.params.group&&!c.settings&&(d=b.getGigyaSettings(this.params.group),c.settings=d)}break;case "socialize.getAvailableProviders":d={};for(f=0;f<c.availableProviders.length;f++)d[c.availableProviders[f].name]=c.availableProviders[f];c.availableProviders=d}"socialize.removeConnection"===
this.api.methodName&&0==c.errorCode?a.socialize.getUserInfo(this.originalParams,{callback:function(a){e(a)}}):e(c)};e.prototype.logoutFromProvidersIfNeeded=function(c,e){var d=c.errorCode;if(b.logoutMethods[this.api.methodName]&&0==d){c.logoutActiveSession&&a._.apiAdapter.clearSession(this.params.APIKey);var g=[],d=5E3,h=0,m;c.connectedProviders?m=c.connectedProviders.toLowerCase():c.provider&&(m=c.provider.toLowerCase());if(m&&!a.utils.validation.isExplicitFalse(this.originalParams.forceProvidersLogout)){var q=
m.split(",");for(m=0;m<q.length;++m){var r=q[m],p=f[r],u=null,v=5E3;0===r.indexOf("saml-")&&(p=f.samlProvider,u=r.substring(5),v=!1,d=1E4,h=5E3);g.push({type:p,data:u,removeAfter:v})}}if(c.samlContext&&c.connectedSamlSessions)for(q=c.samlContext,r=c.connectedSamlSessions.split(","),m=0;m<r.length;++m)g.push({type:f.samlSession,data:{samlContext:q,samlSession:r[m]},removeAfter:!1}),d=1E4,h=5E3;if(g.length){var w=0,A=!1,x=function(){A||(A=!0,e(!1))};window.setTimeout(x,d);d=function(){w++;w===g.length&&
window.setTimeout(x,h)};for(m=0;m<g.length;m++)this.logoutFromProvider(g[m],d)}else e(!1)}else 403013==c.errorCode&&"accounts.verifyLogin"!==this.api.methodName?a.accounts.verifyLogin({callback:function(a){0==a.errorCode?e(!0):e(!1)}}):e(!1)};e.prototype.logoutFromProvider=function(b,e){var d="",g=!1,h=!0,m;m=a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:"fidm."+a.partnerSettings.plugins.apiDomain;switch(b.type){case f.facebook:if(a.providersConfig.facebook){a.socialize.waitForService({service:"facebook",
callback:function(){a.external.facebook.isLoggedIn&&FB.logout?FB.logout(function(){a.external.facebook.refreshSession();a.utils.cookie.remove("fblo_"+a.providersConfig.facebook.appID);e()}):e()}});return}break;case f.yahoo:d="https://login.yahoo.com/config/login?.src=fpctx&logout=1&r=";break;case f.googleplus:d="https://accounts.google.com/logout";h=!1;break;case f.samlProvider:d=a.utils.URL.addParamsToURL("https://"+m+"/saml/v2.0/"+this.params.APIKey+"/sp/jsslo",{name:b.data});g=!0;h=!1;break;case f.samlSession:d=
a.utils.URL.addParamsToURL("https://"+m+"/saml/v2.0/"+this.params.APIKey+"/idp/slo/continue/",b.data),g=!0,h=!1}d?(h&&(d+=(new Date).getTime()),a.utils.script.triggerResource(d,e,g?a.utils.script.ResourceTypes.iframe:a.utils.script.ResourceTypes.image,b.removeAfter)):e()};e.prototype.generateEventsFromResponse=function(c,e){var d=this,f;if(0==c.errorCode)switch(this.api.methodName){case "accounts.logout":case "socialize.logout":case "socialize.unlinkAccounts":case "socialize.deleteAccount":f={eventName:"logout,accounts.logout"};
break;case "socialize.linkAccounts":case "socialize.setUID":b.addUserInfoToEvent(c,f,!0);break;case "socialize.removeConnection":f={eventName:"connectionRemoved,disconnect",provider:this.params.provider||""};b.addUserInfoToEvent(c,f);break;case "socialize.addConnection":!e&&c.user.isLoggedIn?(f={eventName:"login",provider:this.params.provider},b.addUserInfoToEvent(c,f,!0)):(f={eventName:"connectionAdded,connect",provider:this.params.provider},b.addUserInfoToEvent(c,f));break;case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "accounts.socialLogin":this.dispatchAccountsLoginEvent(c);
case "socialize.finalizeRegistration":case "socialize.register":case "socialize.login":if(!c.user&&!c.authCode)break;f={eventName:"login"};var g=this.params.provider;if(!g&&c.providerSessions)for(var h in c.providerSessions){g=h;break}f.provider=g||"site";f.loginMode=this.originalParams.loginMode||"standard";f.newUser=c.newUser||!1;c.authCode&&(f.authCode=c.authCode);b.addUserInfoToEvent(c,f,!0);c.user&&g&&(g=g.toLowerCase(),a.utils.cookie.set("_gig_llp",g),a.utils.cookie.set("_gig_llu",c.user.firstName||
""));break;case "socialize.notifyLogin":this.params.authCode||(f||(f={eventName:"login"}),f.provider="site",b.addUserInfoToEvent(c,f,!0));break;case "gm.notifyAction":a.events.global.dispatch({eventName:"actionNotified",isInternal:!0})}b.loginMethods[this.api.methodName]&&this.originalParams.redirectURL&&f&&f.user&&0==c.errorCode&&a.utils.HTTP.redirect(this.originalParams.redirectURL,[f,f.user],this.originalParams.redirectMethod);0==c.errorCode&&f&&"login"===f.eventName&&!c.profile&&a.events.global._activeNamespaces.accounts&&
-1===this.api.methodName.indexOf("accounts")&&a.accounts.getAccountInfo(this.originalParams,{include:"profile,data",includeUserInfo:!1,callback:function(a){d.dispatchAccountsLoginEvent(a)}});null!=f&&(f.context=this.originalParams.context,a.events.global.dispatch(f,this.originalParams))};e.prototype.dispatchAccountsLoginEvent=function(b){var e={eventName:"accounts.login",remember:a.utils.validation.isExplicitTrue(this.originalParams.remember),provider:this.originalParams.provider?this.originalParams.provider.toLowerCase():
"",loginMode:this.originalParams.loginMode||"standard"};a.utils.object.extractProperties(b,e,"newUser|signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|signKeysUIDSignature");a.events.global.dispatch(e,this.originalParams)};return e}();b.ServerApiRequest=d})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){b.__pluginsCoreLoaded=!1;var g={showReactionsBarUI:["barID"],showCommentsUI:["categoryID","streamID"],showFeedUI:["feedID"],showChatUI:["configID","streamID","chatID"]},h=function(f){function d(a,b,g,h,n,l){void 0===g&&(g={});void 0===h&&(h={});void 0===n&&(n="");void 0===l&&(l={});f.call(this,d.getApiName(b,a,l),l);this.methodName=a;this.jsName=b;this.settings=l;l.defaultParams=g||{};l.defaultPopupParams=h||{};l.requiredParams=n||""}__extends(d,f);d.getApiName=function(a,
b,d){void 0===d&&(d={});return d.apiName||a.split(".")[0]+"."+b};d.versionSelector=function(e,c,d,f,g){void 0===g&&(g="version");var h=new b.api.VersionSelector(e,f,d);a.utils.functions.createAlias("gigya."+c+"."+e,function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];var e=b[0],c=b[1];c||(c=e,e=null);c||(c={},b.push(c));e=a.utils.object.merge([{},e,c]);h.callVersion(""+e[g],c,b)});return h};d.createApi=function(a,b,f,g,h,l){void 0===h&&(h={});h.useBasePlugin=!0;a=new d(a,g,null,
null,null,h);a.namespace=b;a.className=f;a.instanceMethods=l||[];a.addInstanceMethodsAliases();return a};d.prototype.addInstanceMethodsAliases=function(){for(var a=0;a<this.instanceMethods.length;a++)this.createInstanceMethodAlias(this.instanceMethods[a])};d.prototype.createInstanceMethodAlias=function(e){var c=this;a.utils.functions.createAlias("gigya."+this.namespace+"."+e,function(d){if(c.injectionInfo){var f=c.getPublicMethod(e),g=b.plugins.getPluginInstance(d,c.injectionInfo);if(g){var h=[];
a.utils.array.forEach(f.argNames,function(a){a&&void 0!==d[a]&&h.push(d[a])});g[f.instanceMethod].apply(g,h)}else a.log.addLog("couldn't find instance",c,!1)}else a.log.addLog("invalid injection info",c,!1)})};d.prototype.getPublicMethod=function(a){var b;this.injectionInfo.publicMethods&&(b=this.injectionInfo.publicMethods[a]);if(!b)throw Error("public method "+a+" is not configured for "+this.injectionInfo.name);return b};d.prototype.preprocessRequest=function(a,b){var d=this;f.prototype.preprocessRequest.call(this,
a,function(){a.source||d.setSourceData(a);b&&b()})};d.prototype.run=function(b){var c=this;!this.settings.waitForAPIQueue||b.ignoreApiQueue?this.startUI(b):a.utils.queue.queueForExecution("API",function(){c.startUI(b)})};d.prototype.startUI=function(b){var c=this;b=a.utils.object.clone(b);this.prepareParameters(b);this.preprocessRequest(b,function(){c.settings.useBasePlugin?c.loadPluginJS(b,function(d){a.utils.queue.queueForExecution("UI",function(){d&&c.className&&(c.pluginType=eval("gigya._.plugins."+
c.className),c.injectionInfo=c.pluginType.injectionInfo(c));var f=function(){c.startPlugin(b)};0==b.waitForDebug?f():a.utils.queue.queueForExecution("debug",f)})}):c.legacyStartUI(b)})};d.prototype.startPlugin=function(d){var c=this;a.events.global.dispatch({eventName:"beforePluginRequest",methodName:this.methodName,params:d},d);var f=d.originalMethodName||this.methodName;a.log.logCall(f,d);a.reports.reportLoad(f,d);if(this.pluginType){d&&(f=b.plugins.getPluginInstance(d,this.injectionInfo))&&f.dispose&&
!d._allowMultipleInstances&&!d.newModal&&f.dispose();f=new this.pluginType(d,this.injectionInfo);b.plugins.setPluginInstance(d,this.injectionInfo,f);f.onDisposedEvent().add(function(){return b.plugins.removePluginInstance(d,c.injectionInfo)});f.start();if(f.containerID){var g=document.getElementById(f.containerID);g&&(g.gigyaPluginInstance=f)}d.getInstance&&d.getInstance(f)}else a.utils.functions.callFunction("gigya."+this.jsName+"."+this.methodName,[d,d,d])};d.prototype.loadPluginJS=function(d,c){if(this.wasPluginJSLoaded(d))c&&
c(!1);else{var f=!1,g=a._.getCdnResource("/js/"),h="gigya.services."+this.jsName,l=g+h+".min.js"+(d.lang?"?lang="+d.lang:""),g=g+"gigya.services.plugins.base.min.js?services="+h+(d.lang?"&lang="+d.lang:"");b.__pluginsCoreLoaded?h=l:(h=g,f=b.__pluginsCoreLoaded=!0,a.utils.queue.hold("pluginsJS","UI"));a.utils.script.load(h,null,function(){f&&a.utils.queue.release("pluginsJS","UI");c&&c(!0)},!0,void 0,[l,g])}};d.prototype.wasPluginJSLoaded=function(b){var c="gigya."+this.jsName+"."+this.methodName,
d="gigya.services."+this.jsName+".js";try{var f=eval(c),g=a.i18n[d][b.lang]}catch(h){return!1}return"undefined"!==typeof f&&"undefined"!==typeof g};d.prototype.setSourceData=function(a){a.source="socialize.showSimpleShareUI"==this.methodName?"socialize.showShareUI":a.originalMethodName||this.methodName;if(!a.sourceData&&g[this.methodName]){for(var b={},d,f=0;f<g[this.methodName].length;f++){var h=g[this.methodName][f];null!=a[h]&&(d=!0,b[h]=a[h])}d&&(a.sourceData=b)}a.pluginsStack||(a.pluginsStack=
[]);a.pluginsStack.push({source:this.methodName});a.lastSource=this.methodName};d.prototype.validateRequiredParams=function(b){for(var c=this.settings.requiredParams.split("|"),d=0;d<c.length;d++){var f=c[d];if(""!=f&&(null==b[f]||""==b[f]))return a.events.dispatchInvalidParamError(b,f),!1}return!0};d.prototype.setDefaultParams=function(a){var b=!a.containerID||a.isPopup,d;for(d in this.settings.defaultParams)null==a[d]&&(a[d]=b&&this.settings.defaultPopupParams[d]?this.settings.defaultPopupParams[d]:
this.settings.defaultParams[d]);if(b)for(d in this.settings.defaultPopupParams)a[d]||(a[d]=this.settings.defaultParams[d])};d.prototype.prepareParameters=function(b){for(var c in b)-1!=c.toLowerCase().indexOf("provider")&&"string"==typeof b[c]&&(b[c]=a._.providers.replaceProviderAliases(b[c]));b.lang||(b.lang=a.thisScript.lang.langCode);b.source?b.isPopup=!1:this.setSourceData(b)};d.prototype.legacyStartUI=function(b){var c=this,d=b.containerID;if(this.settings.ignoreContainerId)d=b.containerID="";
else if(null==b.containerID&&!this.settings.allowPopup||b.containerID&&!document.getElementById(b.containerID)){a.events.dispatchInvalidParamError(b,"containerID");return}var f=this.settings.allowPopup&&(!d||b.isPopup);f&&this.settings.useNewModal&&(b.useNewModal=!0);this.setDefaultParams(b);this.settings.allowPopup||f||a.utils.DOM.clearByID(d);this.validateRequiredParams(b)&&this.loadPluginJS(b,function(){var d=function(){c.prepareContainer(b,f,function(){c.startPlugin(b)})};a.utils.queue.queueForExecution("UI",
function(){0==b.waitForDebug?d():a.utils.queue.queueForExecution("debug",d)})})};d.prototype.prepareContainer=function(b,c,d){var f=this;if(document.body){var g=b.containerID,h;c&&(g=a.utils.DOM.getCenteredDivID(this.methodName),b.newModal&&(g+=(new Date).getTime()),b.containerID=g,b.isPopup=!0,document.getElementById(g)||(h=a.utils.DOM.createTopLevelDiv(g),h.style.position="absolute"));if(h=h||document.getElementById(g)){var m=h.Reqs?h.Reqs:h.Reqs=[],q=m.length+"@0@"+g;b.rid=q;m[m.length]={rid:q,
container:h,method:this.methodName,context:b.context,c:b,p:b,i:b,operation:this.methodName,isHTML:!0};if(h&&h.style){h.style.display="";h.style.visibility="";if(g=document.getElementById("gigya_ifr_"+g))g.style.display="",g.style.visibility="";null!=g&&(a.utils.DOM.setSize(g,b.width,b.height,c),g.style.visibility="visible");a.utils.DOM.setSize(h,b.width,b.height,c)}g=this.methodName.split(".").pop();h.setAttribute&&h.setAttribute("gigid",(b.source&&b.source!=g?b.source+"_":"")+g)}else a.events.dispatchInvalidParamError(b,
"containerID");d()}else window.setTimeout(function(){f.prepareContainer(b,c,d)},200)};return d}(b.BaseApi);b.UiApi=h})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){function b(a,d){return a.instanceID?a.instanceID:a.isPopup?"gigya-modal-plugin-container-"+d.methodName:a.containerID?a.containerID:d.name}a.instances={};a.getPluginInstance=function(f,d){var e=b(f,d);return a.instances[e]};a.setPluginInstance=function(f,d,e,c){void 0===c&&(c=!1);d=b(f,d);if(!c){c=d;for(var k=2;a.instances[d];k++)d=c+k.toString()}f.instanceID=d;a.instances[d]=e};a.removePluginInstance=function(f,d){delete a.instances[b(f,d)];delete f.instanceID}})(a.plugins||
(a.plugins={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.registerPlugin=function(b){a.utils.queue.queueForExecution("UI",b)};b.attachPlugin=function(b,f,d,e){f||(f="socialize");a[f]||(a[f]={});a[f].plugins||(a[f].plugins={});a[f].plugins[d]||(a[f].plugins[d]={instances:[]});var c=a[f].plugins[d];c[e]||(c[e]=function(a){a=new b(a,"gigya."+f+".plugins."+d+".instances["+c.instances.length+"]");c.instances.push(a)});if(b.StaticApi)for(var g in b.StaticApi)a.utils.functions.createAlias("gigya."+f+".plugins."+d+"."+g,
b[b.StaticApi[g]])}})(b.UI||(b.UI={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){var h=function(){function b(a,e,c){this.methodName=a;this._versions=e;if(!this._versions||1>this._versions.length)throw Error(this.methodName+": required at least one valid version");if(c){if(this._defaultVersionIndex=this.findVersionIndexOrDefault(c),-1==this._defaultVersionIndex)throw Error(this.methodName+": default version is not defined as a version");}else this._defaultVersionIndex=0}b.prototype.callVersion=function(a,b,c){void 0===b&&(b={});void 0===c&&
(c=[b]);var f=this.findVersionIndexOrDefault(a);if(-1==f)throw Error("gigya plugin version doesn't exist");if(f=this.findSupportedVersion(f))this.invokeVersionMethod(f,b,c);else throw Error(a+": could not find supported version for this browser");};b.prototype.findSupportedVersion=function(a){for(var b=this._versions.length,c=0;c<b;++c){var f=this._versions[(a-c+b)%b];if(!f.isSupported||f.isSupported({directCall:0==c}))return f}};b.prototype.findVersionIndexOrDefault=function(b){var e=-1;b&&(e=a.utils.array.firstIndex(this._versions,
function(a){return a.versionName==b}));-1==e&&(e=void 0!==this._defaultVersionIndex?this._defaultVersionIndex:-1);return e};b.prototype.invokeVersionMethod=function(a,b,c){void 0===b&&(b={});void 0===c&&(c=[b]);var f;switch(typeof a.method){case "function":f=a.method;break;case "string":f=eval(a.method);b.selectedMethodName=a.method;break;default:throw Error(this.methodName+" "+a.versionName+": unsupported gigya-version method");}for(var g in a.additionalParams)b[g]=a.additionalParams[g];b.originalMethodName=
this.methodName;f.apply(this,c)};return b}();b.VersionSelector=h})(b.api||(b.api={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.didChatAuthenticate=!1;b.init=function(){a.socialize.addEventHandlers({listenerType:"component"},{onLogin:function(){b.didChatAuthenticate=!1}});b.didChatAuthenticate=!1};b.beforeChatRequest=function(h,f){b.didChatAuthenticate?f():(b.didChatAuthenticate=!0,a.socialize.getUserInfo({signIDs:!0,callback:function(a){0==a.errorCode&&""!=a.user.UID&&""!=a.user.UIDSignature&&""!=a.user.signatureTimestamp&&(h.UID=a.user.UID,h.UIDSignature=a.user.UIDSignature,h.signatureTimestamp=
a.user.signatureTimestamp,h.loginTokenExp=a.user.loginTokenExp?a.user.loginTokenExp:0);f()}}))}})(b.chat||(b.chat={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){b.defaultApiSchema="ctag|APIKey|cid|oauth_token|source|sourceData|usePost|refUID|fb_UID|fb_at|fb_exp|environment";b.defaultOauthSchema="ctag|temporary_account|authFlow|connectWithoutLogin|provider|redirectMethod|redirect_uri|pendingRegistration|lang|regSource|extraPermissions|sessionExpiration|forceAuthentication|includeiRank|includeAllIdentities|extraFields|enabledProviders|disabledProviders|signIDs|openIDUsername|openIDURL|openIDProviderLogo|openIDProviderName|finalizeRegistration|include|actionAttributes|profileAttributes|googlePlayAppID|bp_channel_url|loginIfExists|includeUserInfo|redirectURL|authCodeOnly|enablePopupLocation|invite|regToken|loginMode|apiDomain|conflictHandling|forcePermissions|signKeys";b.postBookmarkSchema=
"provider|URL|url|title|description|target|cid|APIKey|shortURLs|source|sourceData|providerKey|thumbnailURL|tags|userAction|[providerCapability=actions]UserAction|actionAttributes|facebookDialogType";b.loginMethods={"socialize.login":1,"socialize.addConnection":1,"socialize.notifyLogin":1,"socialize.linkAccounts":1,"accounts.login":1,"accounts.socialLogin":1,"accounts.linkAccounts":1,"accounts.register":1,"accounts.finalizeRegistration":1};var g=function(a){return"link"!==a.loginMode&&"reAuth"!==a.loginMode},
h=function(a,b){b()};b.logoutBehaviour={logoutBeforeServerResponse:!0,alwaysSendLogoutToServer:!1};b.logoutMethods={"socialize.logout":1,"accounts.logout":1,"socialize.deleteAccount":1,"socialize.unlinkAccounts":1};var f=function(b,d){a.partnerSettings.ssoKey&&(b.signIDs=!0);d()},d=function(){return!b.logoutBehaviour.alwaysSendLogoutToServer},e={preprocessor:a._.chat.beforeChatRequest};b.arApiList=[new b.ServerApi("socialize.login",b.defaultOauthSchema,!1,{oauth:!0},{preprocessor:h,clearSessionCondition:g,
forceHttps:!0}),new b.ServerApi("socialize.addConnection",b.defaultOauthSchema,!1,{oauth:!0},{forceHttps:!0}),new b.ServerApi("socialize.requestPermissions",b.defaultOauthSchema,!0,{oauth:!0,defaultParams:{forcePermissions:!0}}),new b.ServerApi("accounts.socialLogin",b.defaultOauthSchema,!1,{oauth:!0},{preprocessor:h,clearSessionCondition:g,forceHttps:!0}),new b.UiApi("showDebugUI","socialize.plugins.debug",{},{},"",{allowPopup:!0}),b.UiApi.createApi("showMyPhotoUI","accounts","profilePhoto.MyPhotoPlugin",
"accounts.plugins.profilePhoto"),b.UiApi.createApi("showRatingUI","comments","rating.RatingPlugin","comments.plugins.rating"),b.UiApi.createApi("runJsUnitTests","_","JsUtRunner.Jasmine.JasmineUtRunnerPlugin","_.plugins.jsUtRunner"),b.UiApi.createApi("loadBasePlugin","_","Mock.MockPlugin","_.plugins.mock"),new b.UiApi("showCommentsUI","comments.plugins.comments",{width:500},{},"",{apiName:"comments.showCommentsUI1"}),new b.UiApi("showCommentsUI","comments.plugins.comments2",{width:500},{},"",{apiName:"comments.showCommentsUI2"}),
b.UiApi.versionSelector("showCommentsUI","comments","2",[{versionName:"1",method:a.comments.showCommentsUI1,additionalParams:{ctag:"comments_v1"}},{versionName:"2",method:a.comments.showCommentsUI2,additionalParams:{ctag:"comments_v2"},isSupported:function(){return a.utils.browser.isModern()}}]),new b.UiApi("showShareUI","socialize.plugins.share",{width:520,height:320},{width:595,height:324},"userAction",{allowPopup:!0,preprocessor:function(c,d){var e=c.operationMode;e&&(e=e.toLowerCase().replace(/ /g,
""));c.containerID||(delete c.width,delete c.height);b.apiAdapter.isSessionValid(c,function(b){"simpleshare"==e||"autodetect"==e&&!b?a.socialize.showSimpleShareUI(c):d()})}}),b.UiApi.createApi("showMessageUI","_","messages.MessagesPlugin","_.plugins.messages"),new b.UiApi("showLoginUI_v1","socialize.plugins.login",{width:120,height:110},{width:280,height:220},"",{allowPopup:!0}),b.UiApi.createApi("showLoginUI_v2","socialize","login_v2.LoginPlugin","socialize.plugins.login_v2"),b.UiApi.versionSelector("showLoginUI",
"socialize","1",[{versionName:"1",method:a.socialize.showLoginUI_v1},{versionName:"2",method:a.socialize.showLoginUI_v2}]),new b.UiApi("showAddConnectionsUI_v1","socialize.plugins.login",{width:110,height:65},{width:250,height:200},"",{allowPopup:!0}),b.UiApi.createApi("showAddConnectionsUI_v2","socialize","login_v2.LoginPlugin","socialize.plugins.login_v2"),b.UiApi.versionSelector("showAddConnectionsUI","socialize","1",[{versionName:"1",method:a.socialize.showAddConnectionsUI_v1},{versionName:"2",
method:a.socialize.showAddConnectionsUI_v2}]),new b.UiApi("showFriendSelectorUI","socialize.plugins.friendSelector",{width:400,height:360},{},"",{allowPopup:!0}),new b.UiApi("showFeedUI","socialize.plugins.newsfeed",{width:304,height:265}),new b.UiApi("showChatUI","chat.plugins.chat",{width:300,height:450},{},"",{preprocessor:function(a,b){a.site&&(a.categoryID=a.site);a.stream&&(a.streamID=a.stream);a.skin&&(a.skinID=a.skin);a.streamID=a.streamID||0;b()}}),b.UiApi.createApi("showEditConnectionsUI",
"socialize","editConnections.EditConnectionPlugin","socialize.plugins.edit"),new b.UiApi("showShareBarUI","socialize.plugins.reactions",{shareCountCacheTimeout:30},{},"userAction|shareButtons"),new b.UiApi("showReactionsBarUI","socialize.plugins.reactions",{},{},"userAction|barID|reactions",{preprocessor:function(a,b){a.barID||(a.barID=a.itemID);b()}}),new b.UiApi("showMiniShareUI","socialize.plugins.minishare",{width:320,height:153},{},"",{allowPopup:!0}),new b.UiApi("showFollowBarUI","socialize.plugins.followbar",
{},{},"buttons"),new b.UiApi("showBookmarkUI","socialize.plugins.bookmark",{width:310,height:250},{width:310,height:310}),new b.UiApi("showSimpleShareUI","socialize.plugins.simpleShare",{width:280,height:175},{},"userAction",{allowPopup:!0,dontLoadPluginsCore:!0,waitForAPIQueue:!0}),new b.UiApi("showShareMobileUI","socialize.plugins.shareMobile",{},{},"userAction",{allowPopup:!0}),new b.UiApi("showUserStatusUI","gm.plugins.userStatus",{width:300,hidePoints:!1,hideActions:!1},{},"",{requireSession:!0}),
new b.UiApi("showAchievementsUI","gm.plugins.achievements",{width:300,height:100,excludeChallenges:"_default"}),new b.UiApi("showChallengeStatusUI","gm.plugins.achievements",{width:300,height:100,challenge:"_default"}),new b.UiApi("showLeaderboardUI","gm.plugins.leaderboard",{width:300},{},"",{preprocessor:function(a,b){a&&a.height&&(a.height=null);b()}}),new b.UiApi("showNotifications","gm.plugins.notifications",{},{},"",{preprocessor:function(b,d){var e=a.utils.localStorage.getObject("gmSettings");
e&&e.disableNotifications||(b.containerID="gigNotifications",document.getElementById(b.containerID)||(e=document.createElement("div"),e.id=b.containerID,e.style.position="absolute",e.style.left="-1000px",a.utils.DOM.appendToBody(e)),d())}}),new b.UiApi("showTfaUI","accounts.plugins.tfa",{width:325}),b.UiApi.createApi("showScreenSet","accounts","ScreenSet.ScreenSetPlugin","accounts.plugins.screenSet",void 0,["hideScreenSet","switchScreen"]),new b.ServerApi("socialize.getAvailableProviders","enabledProviders|disabledProviders|requiredCapabilities"),
new b.ServerApi("socialize.notifyLogin","siteUID|UIDTimestamp|UIDSig|UIDNonce|provider|authToken|tokenSecret|regSource|tokenExpiration|sessionHandle|sessionHandleExpiration|userInfo|providerSessions|sessionExpiration|authCode|includeAllIdentitiesincludeiRank|group|settings|extraFields|signIDs|newUser|actionAttributes|profileAttributes|bp_channel_url|signKeys",!1,void 0,{forceHttps:!0,clearSession:!0}),new b.ServerApi("socialize.shortenURL","URL"),new b.ServerApi("socialize.convertAction","userAction|[providerCapability=actions]UserAction|provider"),
new b.ServerApi("socialize.getReactionsCount","barID|buttonIDs|reportLoad"),new b.ServerApi("socialize.incrementReactionsCount","barID|buttonID|count|actionAttributes|profileAttributes"),new b.ServerApi("socialize.deleteAccount",void 0,!0),new b.ServerApi("socialize.delUserSettings","group|settings",!0),new b.ServerApi("socialize.getAlbums","type|enabledProviders|disabledProviders",!0),new b.ServerApi("socialize.getContacts","enabledProviders|disabledProviders",!0),new b.ServerApi("socialize.getFriendsInfo",
"enabledProviders|disabledProviders|detailLevel|UIDs|siteUsersOnly|requiredCapabilities|signIDs",!0),new b.ServerApi("socialize.getPhotos","enabledProviders|disabledProviders|albumIDs|tags",!0),new b.ServerApi("socialize.getRawData","provider|UID|fields|dataFormat|path",!0),new b.ServerApi("socialize.getSessionInfo","provider|paddingMode|encrypt|signIDs|encryptAll",!0),new b.ServerApi("socialize.getUserInfo","enabledProviders|disabledProviders|signIDs|includeiRank|includeAllIdentities|extraFields|group|settings|includeOpenidUID",
!0),new b.ServerApi("socialize.getUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new b.ServerApi("socialize.getPlaces","enabledProviders|disabledProviders|latitude|longitude|query|radius|unifyResults",!0),new b.ServerApi("socialize.checkin","enabledProviders|disabledProviders|placeID|comment|latitude|longitude|actionAttributes|profileAttributes",!0),new b.ServerApi("socialize.logout","signIDs|samlContext|sustainLogoutURLs",!0,{preprocessor:f,disableCache:!0},{requiresSession:d}),
new b.ServerApi("socialize.notifyRegistration","siteUID|UIDTimestamp|UIDSig",!0),new b.ServerApi("socialize.publishUserAction","userAction|[providerCapability=actions]UserAction|enabledProviders|disabledProviders|target|shortURLs|scope|privacy|feedID|userLocation|tags|actionAttributes|profileAttributes",!0),new b.ServerApi("socialize.removeConnection","provider|lastIdentityHandling|removeLoginID",!0),new b.ServerApi("socialize.sendNotification","recipients|body|subject|shortURLs|actionAttributes|profileAttributes",
!0),new b.ServerApi("socialize.setStatus","shortURLs|status|[providerCapability=status]Status|enabledProviders|disabledProviders|userLocation|actionAttributes|profileAttributes",!0),new b.ServerApi("socialize.setUID","siteUID|UIDTimestamp|UIDSig",!0),new b.ServerApi("socialize.setUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new b.ServerApi("socialize.unlinkAccounts",void 0,!0),new b.ServerApi("socialize.getFeed","feedID|startTS|endTS|groups|limit|includeUID"),new b.ServerApi("socialize.sendEmail",
"dontSendEmail|companyName|lang|emails|emailSubject|emailBody|linkBack|senderEmail|senderName|userMsg|shortURLs|userAction|[providerCapability=actions]UserAction|actionAttributes|profileAttributes|captchaTicket|lang",!1,void 0,{forceHttps:!0}),new b.ServerApi("socialize.facebookGraphOperation","graphPath|graphParams|authRequired|method|authType"),new b.ServerApi("socialize.getTopShares","age|tag|limit"),new b.ServerApi("socialize.notifySSOLogin","bp_channel_url"),new b.ServerApi("gm.getChallengeStatus",
"UID|includeChallenges|excludeChallenges|details|lang|actionAttributes|profileAttributes"),new b.ServerApi("gm.resetLevelStatus","challenges|actionAttributes|profileAttributes",!0),new b.ServerApi("gm.getTopUsers","challenge|totalCount|friendsCount|includeSelf|period|lang|actionAttributes|profileAttributes"),new b.ServerApi("gm.getChallengeConfig","UID|includeChallenges|excludeChallenges|lang|actionAttributes|profileAttributes|expandActions"),new b.ServerApi("gm.notifyAction","action|operation|challengeIDs|actionAttributes|profileAttributes",
!0),new b.ServerApi("comments.updateComment","categoryID|streamID|commentID|commentText|commentTitle|ratings|mediaItems|taggedUsers"),new b.ServerApi("comments.postComment","categoryID|streamID|parentID|guestName|guestEmail|commentText|anonymous|mediaItems|privacy|feedID|userAction|[providerCapability=actions]UserAction|scope|enabledProviders|disabledProviders|shortURLs|commentTitle|ratings|tags|taggedUsers|streamTags|actionAttributes|profileAttributes"),new b.ServerApi("comments.getComments","categoryID|streamID|includeSettings|start|startTS|threadLimit|sort|threaded|threadDepth|includeStreamInfo|includeOpenidUID|includeUID|includeReplies|tags|dataFormat|markupType|includeUserOptions|includeUserComments|includeRatingsDims|includeUserHighlighting|pinnedCommentID|lang"),
new b.ServerApi("comments.setStreamInfo","categoryID|streamID|streamTitle|streamURL|streamInfoSig|streamTags"),new b.ServerApi("comments.getTopStreams","categoryID|limit|maxStreamAge|includeLastComment|streamTag|minRatingsCount"),new b.ServerApi("comments.getTopRatedStreams","categoryID|limit|maxStreamAge|ratingClass|minRatingsCount|streamTag"),new b.ServerApi("comments.getStreamInfo","categoryID|streamID|streamIDs|includeLastComment|includeRatingsDims|includeRatingDetails"),new b.ServerApi("comments.flagComment",
"categoryID|streamID|commentID|actionAttributes|profileAttributes"),new b.ServerApi("comments.vote","categoryID|streamID|commentID|vote|actionAttributes|profileAttributes",!0),new b.ServerApi("comments.getUserVotes","categoryID|streamID",!0),new b.ServerApi("comments.getUserComments","categoryID|streamID|tag|senderUID|start|limit|sort|includeReplies|includeStreamInfo|includeUserHighlighting",!0),new b.ServerApi("comments.getFriendsComments","categoryID|streamID|start|limit|includeUID|sort|includeReplies|includeStreamInfo",
!0),new b.ServerApi("comments.getThread","categoryID|streamID|commentID|start|includeUID|limit|threadDepth|sort"),new b.ServerApi("comments.deleteComment","categoryID|streamID|commentID",!0),new b.ServerApi("comments.getRelatedUsers","categoryID|streamID|parentCommentID|usernamePrefix|limit"),new b.ServerApi("comments.analyzeMediaItem","categoryID|urls"),new b.ServerApi("comments.subscribe","categoryID|streamID|email|lang"),new b.ServerApi("comments.unsubscribe","categoryID|streamID|unsubscribeToken"),
new b.ServerApi("comments.setUserOptions","replyNotifications|notificationsEmail|notificationsLanguage",!0),new b.ServerApi("comments.getUserOptions","ServerApiKey",!0),new b.ServerApi("gcs.getUserData","type|fields",!0),new b.ServerApi("gcs.setUserData","data|type|updateBehavior",!0),new b.ServerApi("gcs.search","expTime|querySig|query"),new b.ServerApi("gcs.getSchema","schemaType"),new b.ServerApi("chat.getSettings","categoryID|streamID|skinID|UID|UIDSignature|signatureTimestamp|loginTokenExp",
!1,e),new b.ServerApi("chat.getMessages","categoryID|streamID|start|includeSettings|chatSignature|UID|UIDSignature|signatureTimestamp|loginTokenExp",!1,e),new b.ServerApi("chat.postMessage","categoryID|streamID|messageText|isPrivate|actionAttributes|profileAttributes|signatureTimestamp|loginTokenExp",!0,e),new b.ServerApi("chat.resetChat","categoryID|streamID|timestamp|chatSignature"),new b.ServerApi("chat.blockUser","categoryID|streamID|UID|chatSignature"),new b.ServerApi("chat.blockIP","categoryID|streamID|ip|chatSignature"),
new b.ServerApi("chat.deleteMessage","categoryID|streamID|messageId|chatSignature"),new b.ServerApi("accounts.login","loginID|password|sessionExpiration|targetEnv|regToken|include|actionAttributes|profileAttributes|includeUserInfo|includeDynamicSchema|bp_channel_url|captchaToken|captchaText|loginMode|signKeys",!1,void 0,{preprocessor:h,clearSessionCondition:g,forceHttps:!0,forcePost:!0}),new b.ServerApi("accounts.linkAccounts","loginID|password|sessionExpiration|targetEnv|include|regToken|includeUserInfo|bp_channel_url|signKeys",
!1,void 0,{forceHttps:!0,forcePost:!0}),new b.ServerApi("accounts.initRegistration","sdk",!1,void 0,{clearSession:!0}),new b.ServerApi("accounts.register","username|email|password|UID|regToken|siteUID|secretQuestion|secretAnswer|regSource|profile|data|captchaText|captchaToken|lang|hashedPassword|pwHashAlgorithm|skipVerification|finalizeRegistration|targetEnv|sessionExpiration|include|actionAttributes|profileAttributes|includeUserInfo|bp_channel_url|signKeys",!1,void 0,{forceHttps:!0,forcePost:!0}),
new b.ServerApi("accounts.finalizeRegistration","regToken|targetEnv|include|includeUserInfo|bp_channel_url|allowAccountsLinking|signKeys"),new b.ServerApi("accounts.captchaImage","regToken"),new b.ServerApi("accounts.importProfilePhoto","regToken|URL|publish"),new b.ServerApi("accounts.setProfilePhoto","regToken|publish|photoBytes"),new b.ServerApi("accounts.resetPassword","lang|loginID|passwordResetToken|secretAnswer|securityFields|newPassword|email",!1,void 0,{forceHttps:!0,forcePost:!0}),new b.ServerApi("accounts.isAvailableLoginID",
"loginID"),new b.ServerApi("accounts.resendVerificationCode","regToken|email"),new b.ServerApi("accounts.getCaptcha",""),new b.ServerApi("accounts.getPolicies","sections"),new b.ServerApi("accounts.getSchema","sections|schemaType"),new b.ServerApi("accounts.verifyLogin","include|extraProfileFields|targetEnv",!0),new b.ServerApi("accounts.getAccountInfo","include|extraProfileFields|regToken",!0,{},{},"regToken"),new b.ServerApi("accounts.setAccountInfo","profile|data|regToken|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange|conflictHandling|tfaStatus|rba",
!1,void 0,{forceHttps:!0,forcePost:!0},"regToken"),new b.ServerApi("accounts.logout","signIDs|samlContext|sustainLogoutURLs",!0,{preprocessor:f,disableCache:!0},{requiresSession:d}),new b.ServerApi("accounts.search","expTime|querySig|query"),new b.ServerApi("accounts.getScreenSets","screenSetIDs|include"),new b.ServerApi("accounts.getConflictingAccount","regToken|loginID"),new b.ServerApi("accounts.incrementCounters","counters",!0,{preprocessor:function(a,b){var d=a.actionCounterPath,e=a.counters;
if(d&&e)for(var f=0;f<e.length;f++){var g=e[f];"object"!=typeof g||g.path||(g.path=d)}b()}}),new b.ServerApi("accounts.getCounters","counters",!0),new b.ServerApi("accounts.tfa.getProviders","regToken",!0,{},{},"regToken"),new b.ServerApi("accounts.tfa.initTFA","provider|mode|regToken",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.finalizeTFA","gigyaAssertion|providerAssertion|tempDevice|regToken",!0,{},{},"regToken"),new b.ServerApi("accounts.tfa.deactivateProvider","provider",!0),new b.ServerApi("accounts.tfa.unregisterDevice",
"allDevices",!0),new b.ServerApi("accounts.tfa.phone.getRegisteredPhoneNumbers","gigyaAssertion",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.phone.removePhone","gigyaAssertion|phoneId",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.phone.sendVerificationCode","gigyaAssertion|lang|phoneID|phone|method",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.phone.completeVerification","gigyaAssertion|phvToken|code",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.email.getEmails","gigyaAssertion",
!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.email.sendVerificationCode","emailID|gigyaAssertion|lang",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.email.completeVerification","gigyaAssertion|phvToken|code",!1,{},{forceHttps:!0}),new b.ServerApi("ds.store","type|data|oid|updateBehavior"),new b.ServerApi("ds.get","type|data|oid|fields"),new b.ServerApi("ds.search","expTime|querySig|query"),new b.ServerApi("ds.getSchema",""),new b.ServerApi("ds.delete","type|oid|fields"),new b.ServerApi("ids.getAccountInfo",
"include|extraProfileFields",!0),new b.ServerApi("ids.setAccountInfo","profile|data|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange",!1,void 0,{forceHttps:!0,forcePost:!0}),new b.ServerApi("ids.search","expTime|querySig|query"),new b.ServerApi("gscounters.sendReport","reports|noAuth",!1,void 0,{forceGigyaDomain:!0})];a.utils.functions.createAlias("gigya.socialize.showChatUI",a.chat.showChatUI);a.utils.functions.createAlias("gigya.socialize.showCommentsUI",
a.comments.showCommentsUI);a.utils.functions.createAlias("gigya.socialize.showRatingUI",a.comments.showRatingUI);a.utils.functions.createAlias("gigya.services.socialize",a.socialize);a.utils.functions.createAlias("gigya.services.gcs",a.gcs);a.utils.functions.createAlias("gigya.services.gm",a.gm);a.utils.functions.createAlias("gigya.services.comments",a.comments);a.utils.functions.createAlias("gigya.services.accounts",a.accounts);a.utils.functions.createAlias("gigya.socialize.connect",a.socialize.addConnection);
a.utils.functions.createAlias("gigya.socialize.disconnect",a.socialize.removeConnection);a.utils.functions.createAlias("gigya.socialize.linkAccounts",a.socialize.setUID);a.utils.functions.createAlias("gigya.socialize.showConnectUI",a.socialize.showAddConnectionsUI);a.utils.functions.createAlias("gigya.socialize.showNewsfeedUI",a.socialize.showFeedUI);a.utils.functions.createAlias("gigya.showDebugUI",a.socialize.showDebugUI)})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){function g(){for(var b=[],e=0;e<arguments.length;e++)b[e-0]=arguments[e];var b=a.utils.object.merge([a.thisScript.globalConf,b]),e=b.redirectURL||document.location.href,c=null!=a.partnerSettings.ssoKey,f="1"!==a.utils.localStorage.getItem("_gig_3pc_enabled"),g=a.utils.JSON.deserialize(a.utils.localStorage.getItem("_gig_ssoToken"))||{},h=g.ssoToken,l=(new Date).getTime();g.exp>l&&a.thisScript.globalConf.enableSSOToken&&c&&f&&null!=h?a.utils.HTTP.redirect("https://socialize."+
(a.partnerSettings.plugins.originalApiDomain||a.partnerSettings.plugins.apiDomain)+"/gs/SSOGateway.aspx",[{apiKey:b.APIKey,sessionExpiration:b.sessionExpiration,redirectURL:e,ssoToken:h}],"GET","_top"):a.utils.HTTP.redirect(e,[{}],"GET","_top")}a.socialize.addEventHandlers=function(){for(var b=[],e=0;e<arguments.length;e++)b[e-0]=arguments[e];var b=a.utils.object.merge([a.thisScript.globalConf,b]),e=b.namespace?b.namespace:"socialize",c;for(c in b)0==c.indexOf("on")&&a.events.global.add(c,b[c],b.listenerType,
b.context,e,b);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",errorCode:0,errorMessage:"",operation:"addEventHandlers",context:b.context})};a.accounts.addEventHandlers=function(){for(var b=[],e=0;e<arguments.length;e++)b[e-0]=arguments[e];b=a.utils.object.merge([b,{namespace:"accounts"}]);a.socialize.addEventHandlers(b)};a.socialize.isLoggedIn=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);a.socialize.getUserInfo(b,{callback:function(e){var c=e.user,
c={loggedIn:c?a.utils.validation.isExplicitTrue(c.isLoggedIn):!1};a.utils.object.extractProperties(e,c,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|context");b.callback&&b.callback(c)}})};a.socialize.waitForService=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]),e=b.service;if(e){var e=e.toLowerCase(),c=b.callback;if("fbconnect"==e||"facebook"==e)a.external.facebook.isLoaded()?c({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},
{onFacebookLoaded:c,context:b.context});"googleplus"==e&&(a.external.googlePlus.isLoaded()?c({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},{onGooglePlusLoaded:c,context:b.context}))}};b.bookmarkSize={facebook:{w:640,h:370},twitter:{w:880,h:585},messenger:{w:710,h:905},linkedin:{w:560,h:500},yahoobookmarks:{w:840,h:975},digg:{w:1010,h:1045},delicious:{w:890,h:905},googlebookmarks:{w:710,h:905},mixi:{w:640,h:470},googleplus:{w:496,h:420}};a.socialize.postBookmark=function(){var d=
a.utils.object.merge([a.thisScript.globalConf,arguments]);d.APIKey||(d.APIKey=a.thisScript.APIKey);var e={};a.utils.object.extractProperties([d],e,b.postBookmarkSchema);!e.url&&e.URL&&(e.url=e.URL,delete e.URL);e.sdk="js_"+a.build.version;if(!e.url&&e.userAction&&!e.userAction.linkBack)for(var c=document.getElementsByTagName("meta"),f=0;f<c.length;f++)if("og:url"===c[f].getAttribute("property")&&c[f].getAttribute("content")){e.url=c[f].getAttribute("content");break}e.url||!e.userAction||e.userAction.linkBack||
(e.url=document.location.href);e.provider=e.provider?(e.provider+"").toLowerCase():"";"facebook"===e.provider&&(e.providerKey=a.external.opengraph.getMetaTag("fb:app_id"));a._.apiAdapter.getGmidTicket(function(c){c&&(e.gmidTicket=c);c=b.bookmarkSize[e.provider]||{};c={width:d.popupWidth||c.w,height:d.popupHeight||c.h,top:d.popupPositionY,left:d.popupPositionX,menubar:0,resizable:1,scrollbars:1};d.enablePopupLocation?(c.location=1,c.toolbar=1):c.toolbar=0;var f=a.partnerSettings.customAPIDomainPrefix?
"https://{0}/gs/bookmark.aspx?{1}":"https://socialize.{0}/gs/bookmark.aspx?{1}";a.log.logCall("postBookmark",e);a.events.global.dispatch({eventName:"beforeRequest",methodName:"socialize.postBookmark",rawParams:d,params:e});var g=a.utils.keyValue.serialize(e),f=a.utils.stringUtils.format(f,a.partnerSettings.plugins.apiDomain,g);a.utils.win.open(f,"gs_bookmark_"+e.provider,c)})};a.socialize.refreshUI=function(){var d=a.utils.object.merge([a.thisScript.globalConf,arguments]),e=d.callback;a.socialize.getUserInfo(d,
{callback:function(c){var f={eventName:"login",isInternal:!0};d.provider&&(f.provider=d.provider);b.addUserInfoToEvent(c,f,!0);d.context&&(f.context=d.context);a.events.global.dispatch(f);"function"==typeof e&&e(c)}})};var h={"digg.com":"digg","stumbleupon.com":"stumbleupon","del.icio.us.com":"delicious","technorati.com":"technorati","t.co":"twitter","plus.url.google.com":"googlePlus","facebook.com":"facebook","linkedin.com":"linkedIn","pinterest.com":"pinterest","mixi.jp":"mixi","b.hatena.ne.jp":"hatena",
"line.me":"line"},f;a.socialize.trackReferrals=function(){var d=a.utils.object.merge([a.thisScript.globalConf,arguments]),e={eventName:"linkback",CID:d.cid},c={},g={};-1!=document.location.href.indexOf("#")&&(g=a.utils.keyValue.deserialize(document.location.href.split("#")[1]));-1!=document.location.href.indexOf("?")&&(c=a.utils.keyValue.deserialize(document.location.href.split("?")[1].split("#")[0]));a.socialize.updateRefUID(d.APIKey,g,c);var t=null!=g._gus||null!=c._gus;t&&(e.CID=g._gucid||c._gucid,
e.shortCode=g._gsc||c._gsc,e.provider=g._gup||c._gup);if(!f){var n,g={url:document.location.href,ref:document.referrer};c.fb_ref?(n=a.utils.keyValue.deserialize(c.fb_ref,":"),g.uuid=n.uu,g.sn=n.p,n=n.s):document.referrer&&-1!=document.referrer.indexOf("://")&&(c=document.referrer.split("://")[1].split("/")[0],0==c.indexOf("www.")&&(c=c.split("www.")[1]),h[c]&&(e.provider=g.sn=h[c]));g.sn||document.referrer&&(-1!=document.referrer.indexOf("http://soc.li")||-1!=document.referrer.indexOf("https://shr.gs"))||
(c=document.location.href.split("#guid="),1<c.length&&(c=c[1].split("#")[0].split("&")[0],c!=b.apiAdapter.getTokenParam(d.APIKey,"UUID")&&(g.sn="AddressBarShares",g.uuid=c,"_"==c&&delete g.uuid,document.location.replace("#"),a.reports.trackAddressBarShares(),g.url=document.location.href.split("#")[0])));g.uuid&&a.utils.cookie.set("_gigRefUid_"+d.APIKey,g.uuid);g.sn&&!t&&a.reports.report("linkback",d.APIKey,d.cid,n,null,g);(g.sn||t)&&a.events.global.dispatch(a.utils.object.removeUndefined(e));f=!0}"function"==
typeof d.callback&&d.callback({status:"OK",statusMessage:"",operation:"trackReferrals",context:d.context,errorMessage:"",errorCode:0})};a.socialize.updateRefUID=function(b,e,c){b||(b=a.thisScript.globalConf.APIKey);e||(e={},-1!=document.location.href.indexOf("#")&&(e=a.utils.keyValue.deserialize(document.location.href.split("#")[1])));c||(c={},-1!=document.location.href.indexOf("?")&&(c=a.utils.keyValue.deserialize(document.location.href.split("?")[1].split("#")[0])));e.guid&&"_"!=e.guid&&a.utils.cookie.set("_gigRefUid_"+
b,e.guid);(e=e._giguuid||c._giguuid)&&a.utils.cookie.set("_gigRefUid_"+b,e)};a.socialize.hideUI=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",operation:"hideUI",context:b.context,errorMessage:"",errorCode:0})};a.gcs.submitUserForm=function(){var b={},e=a.utils.object.merge([a.thisScript.globalConf,arguments]),c=document.getElementById(e.form);if(!c){var f=document.getElementsByName(e.form);f&&0<f.length&&
(e.form=f[0])}for(f=0;f<c.elements.length;f++){var g=c.elements[f];if(g.name){for(var h=g.name.split("."),l=b,m=0;m<h.length-1;m++){var q=h[m];l[q]||(l[q]={});l=l[q]}l[h[h.length-1]]=g.value}}e.data=b;a.gcs.setUserData(e)};a.socialize.getProviderShareCounts=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.shareCounts.min.js"),null,function(){a.socialize.plugins.shareCounts.getProviderShareCounts(b)},
!0)};a.utils.functions.createAlias("gigya.setSSOToken",g);a.utils.functions.createAlias("gigya.accounts.setSSOToken",g)})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.initSSO=function(b){b=a.utils.URL.addParamsToURL(a.samlConfig.proxyPageURL,a.utils.object.merge([{mode:"initSSO"},b]));a.thisScript.globalConf.enableSSOToken?a.setSSOToken({redirectURL:b}):window.location.href=b};b.continueSSO=function(){var b=a.utils.URL.addParamsToURL(a.samlConfig.proxyPageURL,{mode:"afterLogin"});window.location.href=b}})(b.saml||(b.saml={}))})(a.fidm||(a.fidm={}))})(gigya||(gigya={}));
(function(a){a=a._||(a._={});a.apiAdapters||(a.apiAdapters={})})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(){if("undefined"!=typeof FB){var d=function(c){b.initializedTime=new Date;b.isConnected="connected"==c.status;b.isLoggedIn="unknown"!=c.status;a.events.global.dispatch({eventName:"FBCRefreshed"})};a.providersConfig.facebook&&a.providersConfig.facebook.appID&&FB&&FB.getLoginStatus&&FB.getLoginStatus(d,!0)}}function f(){for(var a=d,b=0;b<a.length;b++)a[b]();d=[]}var d=[];b.isLoggedIn=!1;b.isConnected=!1;b.isLoaded=function(){return null!=b.initializedTime};
b.load=function(d){if(!b.initializedTime){b.initializedTime=null;window.setInterval(function(){a.external.facebook.refreshSession()},27E5);window.fbAsyncInit=function(){var c=a.utils.object.clone(a.thisScript.globalConf.facebookInitParams);c||(c={});a.providersConfig.facebook?(c.appId=a.providersConfig.facebook.appID,c.version=a.providersConfig.facebook.version):c.version="v1.0";c.status=!1;c.cookie=!0;c.xfbml=!0;c.oauth=!0;FB.init(c);1!=d?FB.getLoginStatus(function(c){b.initializedTime=new Date;
b.isConnected="connected"==c.status;b.isLoggedIn="unknown"!=c.status;a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected});a.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){h()},onConnect:function(){h()},onLogout:function(){h()}})},!0):(b.initializedTime=new Date,a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected}))};
var c=document.createElement("div");c.id="fb-root";a.utils.DOM.appendToBody(c);a.utils.script.load(a.localInfo.protocol+"://connect.facebook.net/"+a.thisScript.lang.full.replace("-","_")+"/sdk.js",null,function(){"none"==document.documentElement.style.display&&(document.documentElement.style.display="")},!0)}};b.refreshSession=h;b.retryPending=f;b.runWhenLoaded=function(a){d.push(a)};b.getParams=function(){var a={};if("undefined"!=typeof FB&&FB.getAuthResponse)try{var b=FB.getAuthResponse();b&&(null!=
b.userID&&(a.fb_UID=b.userID),null!=b.accessToken&&(a.fb_at=b.accessToken),null!=b.expiresIn&&(a.fb_exp=b.expiresIn))}catch(d){}return a};b.autoLogin=function(){a.socialize.waitForService({service:"facebook",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){var c=a.external.facebook.getParams();!b&&c&&c.fb_at&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{facebook:{authToken:c.fb_at,tokenExpiresIn:c.fb_exp}}}))})}})};
a.events.global.add("facebookLoaded",f,"component");a.events.global.add("onFBCRefreshed",f,"component")})(b.facebook||(b.facebook={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.isLoaded=function(){return null!=b.initializedTime};b.load=function(){var h=this;if(!b.initializedTime&&a.providersConfig.googlePlus){b.initializedTime=null;var f=document.createElement("script");f.type="text/javascript";f.async=!0;window.__gigya_handleClientLoad=function(){return h.handleClientLoad()};f.src="https://apis.google.com/js/client.js?onload=__gigya_handleClientLoad";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(f,d)}};
b.handleClientLoad=function(){try{delete window.__gigya_handleClientLoad}catch(h){window.__gigya_handleClientLoad=void 0}b.initializedTime=new Date;a.events.global.dispatch({eventName:"googlePlusLoaded"})};b.refreshSession=function(){};b.autoLogin=function(){a.socialize.waitForService({service:"googlePlus",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){b||gapi.auth.authorize({client_id:a.providersConfig.googlePlus.clientId,scope:a.providersConfig.googlePlus.scopes,
immediate:!0,response_type:"code"},function(b){b&&b.code&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{googlePlus:{code:b.code}}}))})})}})}})(b.googlePlus||(b.googlePlus={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b._ready=null;b.executeOnInit=function(b,f){b&&(f||(f=2E3),a.external.backplane.isLoaded()?a.external.backplane.getChannelId()||a.external.backplane._ready?(a.external.backplane._ready=!0,b()):(window.setTimeout(function(){a.external.backplane._ready||(a.external.backplane._ready=!0,b())},f),Backplane(function(){a.external.backplane._ready=!0;b()})):b())};b.isLoaded=function(){return"undefined"!=typeof Backplane};b.getChannelId=function(){if(a.external.backplane.isLoaded())return Backplane.getChannelID()};
b.resetChannel=function(){a.external.backplane.isLoaded()&&Backplane.resetCookieChannel()};a.events.global.add("logout",a.external.backplane.resetChannel)})(b.backplane||(b.backplane={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.getMetaTag=function(a){for(var b=document.getElementsByTagName("meta"),d=0;d<b.length;d++)if(b[d].getAttribute("property")==a&&b[d].getAttribute("content"))return b[d].getAttribute("content")}})(a.opengraph||(a.opengraph={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(a){a[a.LocalStorageListener=0]="LocalStorageListener";a[a.PostMessage=1]="PostMessage";a[a.Flash=2]="Flash"})(b.MessagingMethod||(b.MessagingMethod={}));b.checkCompleteRegistration=function(b,h,f){var d,e,c=!1;if(206005==b.errorCode)c=!0,a.accounts.finalizeRegistration({regToken:b.regToken,ignoreApiQueue:!0,callback:function(a){f(a)}});else if(!h.dontHandleScreenSet&&((b.regToken||h.regToken)&&(200010==b.errorCode||403043==b.errorCode)||206001==b.errorCode||206002==
b.errorCode||206003==b.errorCode||403101==b.errorCode||403102==b.errorCode||403110==b.errorCode||403100==b.errorCode)){var k;403110==b.errorCode&&(k=e=!0);h.defaultMobileRegScreenSet&&a.localInfo.isMobile?d=h.defaultMobileRegScreenSet:h.defaultRegScreenSet&&(d=h.defaultRegScreenSet)}d?a.accounts.showScreenSet({ignoreApiQueue:!0,newModal:k,initialResponse:b,screenSet:d,onError:function(a){f(b)},onHide:function(a){"finished"===a.reason&&a.user?f({errorCode:0,userInfo:a.user},!0,e):f(b)}}):c||f(b)};
b.getGigyaSettings=function(b){var h=a.utils.localStorage.getObject("gigyaSettings")||{};return a.utils.JSON.serialize(h[b])};b.setGigyaSettings=function(b,h){var f=a.utils.localStorage.getObject("gigyaSettings")||(e={},e[b]={},e),d;for(d in h)f[b][d]=h[d];a.utils.localStorage.setItem("gigyaSettings",a.utils.JSON.serialize(f));var e};b.delGigyaSettings=function(b){if(b){var h=a.utils.localStorage.getObject("gigyaSettings")||{};delete h[b];a.utils.localStorage.setItem("gigyaSettings",a.utils.JSON.serialize(h))}else a.utils.localStorage.removeItem("gigyaSettings")};
b.handleSpecialFields=function(g){var h=a.socialize.Collection,f=function(a,d){for(var e=[],f=0,g=a[f];g;)e.push(new d(g)),e[f].identities&&b.convertIdentitiesArrayToObject(e[f]),g=a[++f];return e};g.photos&&(g.photos=new h(g.photos,"photoID"));g.albums&&(g.albums=new h(g.albums,"albumID"));g.contacts&&(g.contacts=new h(f(g.contacts,a.socialize.Contact),"email"));g.friend&&(g.friend=new h(f(g.friend,a.socialize.Friend),"UID"));g.user&&(g.user=new a.socialize.User(g.user));if(g.friends&&g.friends instanceof
Array){for(var d=[],e=0;e<g.friends.length;e++)d.push(g.friends[e].UID);g.UIDs=d.join(",");g.friends=new h(f(g.friends,a.socialize.Friend),"UID")}};b.convertIdentitiesArrayToObject=function(b){if(null==b.identities)b.identities={};else if(b.identities.constructor==Array){var h=b.identities;b.identities={};for(var f=0;f<h.length;f++)b.identities[h[f].provider]=new a.socialize.Identity(h[f])}};b.addUserInfoToEvent=function(b,h,f,d){d=b.user||b.userInfo;null==h&&(h={});null!=d&&(h.user=a.utils.object.clone(d),
null!=b.isLoggedIn&&(h.user.isLoggedIn=b.isLoggedIn),null!=b.isSiteUID&&(h.user.isSiteUID=b.isSiteUID),null!=b.iRank&&(h.user.iRank=b.iRank));f&&(a.utils.object.extractProperties(b,h,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|signKeysUIDSignature"),null!=h.user&&(h.UID=d.UID,h.isSiteUID=d.isSiteUID));return h};b.sendEmailNative=function(b){var h=b.userAction||{},f=h.linkBack||"";document.location.href="mailto:?to=&subject="+a.utils.URL.URLEncode(h.title||"")+"&body="+a.utils.URL.URLEncode(f);
a.socialize.sendEmail(b,{dontSendEmail:!0})};b.getPageBaseDomain=function(g,h){void 0===g&&(g=a.localInfo.pageDomain);void 0===h&&(h=a.partnerSettings.baseDomains);if(h){var f=b.Uri.parse(g);if(f){var d=h.split(",");d.push("gigya.com");for(var e=0;e<d.length;e++){var c=a.utils.stringUtils.replaceAll(d[e],"*",""),c=b.Uri.parse(c);if(f.isIn(c))return c.isForSubDomains()?f.domain:c.domain}}}return null}})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){function g(){a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){a.log.showConfig()},!0)}b.CONSOLE_LOG_LEVELS=["debug","info","log","warn","error"];b.selectedConsoleLogLevels=[];b._log=[];b.enable=function(){a.utils.cookie.set("_gig_dbgConsole_log","1",null)};b.disable=function(){a.utils.cookie.set("_gig_dbgConsole_log","0",null)};b._isEnabled=function(){var g=a.utils.cookie.get("_gig_dbgConsole_log");return"undefined"!==
typeof g&&null!=g?"1"===g:0<b.selectedConsoleLogLevels.length};b.addLog=function(g,f,d){void 0===d&&(d=!1);if(a.log._isEnabled()||d){var e=g;f=a.utils.object.clone(f,!0,!1,4,null,!0);null!=f&&(e+=":"+("object"==typeof f?"\n":"")+a.utils.JSON.serialize(f,!0,!0));d&&"object"==typeof console&&console.log&&console.log(e);a.log._isEnabled()&&(b._log.push(e),null!=document.getElementById("gigya_log")&&a.log.show&&a.log.show(),g=-1!=a.utils.array.indexOf(a.log.CONSOLE_LOG_LEVELS,g)?g:"log",a._.apiAdapter.onJSLog(g,
e))}};b.logCall=function(b,f,d){d||(d=f.lastSource);a.log.addLog("Calling "+b+(d&&d!=b?" for "+d:"")+(f.source&&d!=f.source?" initiated from "+f.source:"")+" with these params",f)};b.debug=g;b.showLog=function(){a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){a.log.show()},!0)};b.show=function(){};b.showConfig=function(){};a.utils.functions.createAlias("gigya.debug",g)})(a.log||(a.log={}))})(gigya||(gigya={}));
var defaultObjects={},defaultObjectsDef={User:"personwithuid+isLoggedIn|false,isConnected|false,isSiteUser|false,identities|{},providers|[],timestamp,UIDSig,UIDSignature,signatureTimestamp,loginProvider,loginProviderUID,capabilities|{}",Friend:"personwithuid+timestamp,friendshipSig,friendshipSignature,signatureTimestamp,timestamp,isSiteUser|false,identities|{}",Identity:"person+isExpiredSession|false,allowsLogin|false,providerUID,provider,isLoginIdentity|false,missingPermissions",Contact:"provider,firstName,lastName,nickname,email,photoURL",
person:"nickname,photoURL,thumbnailURL,birthDay|0,birthMonth|0,birthYear|0,gender,email,proxiedEmail,country,state,city,zip,firstName,lastName,profileURL,age|0",personwithuid:"person+UID,isSiteUID|false",UserAction:"actorUID,actorNickname,actionName,date|new Date(),targets|[],images|[],actionData1,actionData2,iconURL,title,linkBack,userMessage,description,actionLinks|[],mediaItems|[],subtitle"},createDefaultObject=function(a){var b={};a=defaultObjectsDef[a];-1!=a.indexOf("+")&&(b=createDefaultObject(a.split("+")[0]),
a=a.split("+")[1]);a=a.split(",");for(var g=0;g<a.length;g++){var h="",f=a[g].split("|");if(1<f.length)try{h=gigya.utils.JSON.deserialize(f[1])}catch(d){}b[f[0]]=h||""}return b},_createConstructor=function(a){return function(b){var g=defaultObjects[a],h;for(h in g)this[h]=gigya.utils.object.clone(g[h]);if("object"==typeof b)for(h in b)"function"!=typeof b[h]&&(this[h]=gigya.utils.object.clone(b[h]))}},def;
for(def in defaultObjectsDef)defaultObjects[def]=createDefaultObject(def),gigya.socialize[def]=_createConstructor(def);gigya.socialize.Collection=function(a,b){this.arr=a;this._key=b?b:""};
gigya.socialize.Collection.prototype={asArray:function(){return this.arr},each:function(a){for(var b=0,g=this.arr[b];g;)a(g,b),b++,g=this.arr[b]},getById:function(a){"undefined"==typeof this._hash&&this._buildHash();return(this._hash?this._hash:this.arr)[a]},getSize:function(){return this.arr.length},_buildHash:function(){var a=this._hash={},b=this._key;this.each(function(g,h){a["function"==typeof g[b]?g[b]():g[b]]=g})}};
gigya.socialize.UserAction.prototype={clone:function(){return new gigya.socialize.UserAction(gigya.utils.object.clone(this,!0,!0))},getTemplate:function(){return this.titleTemplate},setTemplate:function(a){this.titleTemplate=a},getActor:function(a){return{UID:this.actorUID,nickname:this.actorNickname}},setActionName:function(a){this.actionName=a;return this},getActionName:function(a){return this.actionName},getTemplateFields:function(){var a=[],b;for(b in this.templateFields)a.push(this.templateFields[b]);
return new gigya.socialize.Collection(a,"fieldName")},setTemplateField:function(a,b,g){this.templateFields[a]={fieldName:a,text:b,href:g};return this},getTemplateField:function(a){return this.templateFields[a]?this.templateFields[a]:null},addTarget:function(a){if("object"==typeof a)return this.targets.push({UID:a.UID,nickname:a.nickname?a.nickname:""}),this;if("string"==typeof a)return this.targets.push({UID:a,nickname:""}),this},addActionLink:function(a,b){this.actionLinks.push({text:a,href:b?b:
""});return this},addMediaItem:function(a){this.mediaItems.push(a);return this},setTitle:function(a){a&&(this.title=a);return this},setLinkBack:function(a){a&&a.toString&&(a=a.toString());a&&(this.linkBack=a);return this},setUserMessage:function(a){this.userMessage=a?a:"";return this},setDescription:function(a){this.description=a?a:"";return this},addImage:function(a,b){this.addMediaItem({type:"image",src:a,href:b})},getImages:function(){return new gigya.socialize.Collection(this.images,"")},getTargets:function(){return new gigya.socialize.Collection(this.targets,
"UID")},setIconURL:function(a){this.iconURL=a;return this},getIconURL:function(){return this.iconURL},getDate:function(){return this.date},setActionData1:function(a){this.actionData1=a;return this},getActionData1:function(a){return this.actionData1},setActionData2:function(a){this.actionData2=a;return this},getActionData2:function(a){return this.actionData2},setSubtitle:function(a){this.subtitle=a;return this},getSubtitle:function(){return this.subtitle}};
(function(a){(function(b){(function(g){function h(a,b){void 0===b&&(b=g.arProviders);for(var c=0;c<b.length;c++)if(b[c].name.toLowerCase()===a.toLowerCase())return b[c]}function f(a){if(null!=a){a=a.split(",");for(var c=0;c<a.length;c++){var d=a[c].replace(/^\s+|\s+$/g,"");b.providers._aliases[d]&&(a[c]=b.providers._aliases[d])}return a.join(",")}}function d(a,b){void 0===b&&(b=g.arProviders);for(var c=0;c<b.length;c++)if(b[c].ID===a)return b[c]}function e(a,b,c){void 0===b&&(b="");void 0===c&&(c=
g.arProviders);b=b.toLowerCase();b=b.split(" ").join("").split(".").join("").toLowerCase().split(",");b=n(b,c);for(c=0;c<b.length;c++)for(var d=0;d<a.length;d++){var e=a[d];(e=e.name||e.toString())&&(e=e.toLowerCase());e===b[c]&&a.splice(d,1)}return a}function c(a,b){null==b&&(b=[]);for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=!0,g=0;g<b.length;g++){for(var h=!1,k=0;k<e.arDefaultCapabilities.length;k++)if(e.arDefaultCapabilities[k].toLowerCase()==b[g].toLowerCase()){h=!0;break}if(!h){f=!1;break}}f&&
c.push(e)}return c}function k(){return g.arProviders.concat()}function t(b,c){void 0===c&&(c=g.arProviders);b=(""+b).split(" ").join("").split(".").join("").toLowerCase();b=f(b);for(var d=(""+b).split(","),d=n(d,c),e=[],k=0;k<d.length;k++){var l=h(d[k],c);null!=l&&-1==a.utils.array.indexOf(e,l)&&e.push(l)}return e}function n(a,b){b||(b=g.arProviders);for(var c=[],d=0;d<a.length;d++)if("*"==a[d])for(var e=0;e<b.length;e++){for(var f=!1,h=0;h<a.length;h++)a[h].toLowerCase()===b[e].name.toLowerCase()&&
(f=!0);f||b[e].explicitOnly||c.push(b[e].name)}else c.push(a[d]);return c}g._aliases={};var l=function(){function a(b,c,d,e,f,h,k){this.ID=b;this.displayName=c;this.width=d;this.height=e;this.explicitOnly=h;this.aliases=k;this.arDefaultCapabilities=f.split(",");this.name=c.toLowerCase().split(" ").join("").split("!").join("").split(".").join("").split("+").join("plus");if(k)for(g._aliases||(g._aliases={}),b=k.split("|"),c=0;c<b.length;c++)g._aliases[b[c]]=this.name;switch(this.name){case "messenger":this.displayName=
"Microsoft";break;case "customopenid":this.displayName="OpenID";break;case "paypaloauth":this.displayName="PayPal"}}a.prototype.toString=function(){return this.name};return a}();g.Provider=l;g.arProviders=[new l(64,"Facebook",650,400,"login,friends,places,status,actions,photos"),new l(9012,"Twitter",800,440,"login,friends,notifications,actions,status,places,checkins"),new l(72,"Google+",560,600,"login,friends,contacts",!1,"google|googleplus"),new l(9042,"LinkedIn",865,450,"login,friends,status,actions,notifications,contacts"),
new l(9803,"Yahoo",500,567,"login,friends,contacts,notifications"),new l(1047,"Messenger",380,540,"login, friends",!1,"messenger|microsoft"),new l(9832,"Instagram",440,420,"login,photos"),new l(9222,"Odnoklassniki",888,425,"login"),new l(9007,"FourSquare",1E3,650,"login,friends,places,checkins"),new l(8191,"Renren",450,350,"login,friends,status,actions"),new l(8203,"QQ",570,460,"login,actions"),new l(9821,"Sina",640,380,"login,status,actions"),new l(4228,"Mixi",1E3,720,"login,friends,actions,photos",
!0),new l(9830,"Yahoo! JAPAN",980,700,"login",!0),new l(8205,"Spiceworks",640,380,"login",!0),new l(9041,"VKontakte",610,510,"login,friends,photos,status,actions"),new l(9800,"AOL",530,720,"login"),new l(4096,"WordPress",700,540,"login"),new l(256,"Blogger",760,400,"login"),new l(4218,"Netlog",730,590,"login",!0),new l(4224,"Orange France",730,590,"login",!0),new l(5002,"Livedoor",970,700,"login",!0),new l(5004,"Fox News",730,590,"login",!0),new l(1051,"PayPal",400,550,"login",!0),new l(9058,"Amazon",
785,510,"login",!0),new l(9219,"Xing",785,510,"login,friends",!0),new l(8206,"WeChat",730,590,"login",!1,"wechat|weixin"),new l(4121,"Custom OpenID",730,590,"login",!0),new l(4122,"Custom SAML",730,590,"login",!0),new l(6002,"Site",730,590,"",!0),new l(1052,"PayPalOAuth",730,590,"login",!0),new l(8207,"Line",730,590,"login")];g.getProviderByName=h;g.replaceProviderAliases=f;g.getProviderById=d;g.hideProvidersByName=e;g.getProvidersForRequiredCapabilities=c;g.getAllProviders=k;g.getProvidersByName=
t;g.replaceWildcard=n;a.utils.functions.createAlias("gigya.socialize.getAllProviders",k);a.utils.functions.createAlias("gigya.socialize.replaceProviderAliases",f);a.utils.functions.createAlias("gigya.socialize.getProvidersByName",t);a.utils.functions.createAlias("gigya.socialize._getProviderByName",h);a.utils.functions.createAlias("gigya.socialize.hideProvidersByName",e);a.utils.functions.createAlias("gigya.socialize._getProviderByID",d);a.utils.functions.createAlias("gigya.socialize.getProvidersForRequiredCapabilities",
c)})(b.providers||(b.providers={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){function g(){for(;b.queue&&0<b.queue.length;){var f=a.utils.object.clone(b.queue.splice(0,5),!0,!0);a.gscounters.sendReport({reports:f,noAuth:!h(f)})}}function h(a){for(var b=0;b<a.length;b++){var e=a[b];if("loadc"!==e.name&&"load"!==e.name||"loadc"===e.name&&e.reportData&&e.reportData.actionCounterPath)return!0}return!1}b.trackAddressBarShares=function(){if(a.thisScript.globalConf.trackAddressBarShares){var b=a._.apiAdapter.getTokenParam(a.thisScript.APIKey,"UUID"),d=document.location.href.split("#");
1!=d.length&&""!=d[1]&&"guid=_"!=d[1]||document.location.replace("#guid="+(b?b:"_"))}};b.report=function(f,d,e,c,g,t,n){void 0===t&&(t={});void 0===n&&(n=!1);f=a.utils.object.removeUndefined({name:f,time:(new Date).getTime().toString(),source:c,sourceData:g,reportData:t,cid:e});n?(n=[f],a.gscounters.sendReport({reports:n,noAuth:!h(n)})):(b.queue||(b.queue=[]),b.queue.push(f))};b.init=function(){setInterval(g,5E3)};b.reportLoad=function(a,b){if(!b._reportedLoad){b._reportedLoad=!0;var e="load";"gigya.socialize.plugins.reactions.showReactionsBarUI"!=
a&&("gigya.socialize.plugins.simpleshare.showSimpleShareUI"==a&&(e="loadSimple"),this.report(e,b.APIKey,b.cid,b.source,b.sourceData))}}})(a.reports||(a.reports={}))})(gigya||(gigya={}));
(function(a){(function(b){var g=function(){function g(b,d){void 0===d&&(d=!0);this.params=b;this._logger=a.log;this._eventDispatcher=function(b,d){return a.events.dispatchForWidget(b,d)};this._errorDispatcher=a.events;this._globalEventsManager=a.events.global;this._isDisposed=!1;this._eventWrappers={};this._globalEventHandlers={};this._id=++g.instanceCounter;this.params=b?a.utils.object.clone(b):{};d&&this.validateParams();for(var e in b)this[e]&&(this[e]=b[e])}g.prototype.onErrorEvent=function(){return this.getEvent("onError")};
g.prototype.onDisposedEvent=function(){return this.getEvent("onDisposed")};g.prototype.getType=function(){return this.constructor.name||this.getFunctionName(this.constructor)};g.prototype.getFunctionName=function(a){a=a.toString();a=a.substr(9);return a=a.substr(0,a.indexOf("("))};g.prototype.getConfig=function(){this.error(g.NOT_IMPLEMENTED_ERROR,400096);return{}};g.prototype.toString=function(){return this.getType()+" "+this.id()};g.prototype.id=function(){return this._id};g.prototype.warn=function(a,
b){var e=this.id()+" "+this.getType()+" - "+a;this._logger.addLog(e,b,!0)};g.prototype.error=function(a,b,e){void 0===b&&(b=300001);b={errorMessage:a,errorCode:b,errorDetails:this.id(),info:e};this.warn(a,b);this.dispatchEvent("error",b)};g.prototype.validateParams=function(b){b||(b=this.getConfig().requiredParams||[]);this.getConfig().defaultParams&&(this.params=a.utils.object.merge([this.getConfig().defaultParams,this.params]));var d=[];if(0<b.length)for(var e in b)if(b.hasOwnProperty(e)){var c=
b[e];this.params[c]||d.push(c)}return 0<d.length?(this.dispatchInvalidParamError(d[0]),!1):!0};g.prototype.dispatchEvent=function(a,b){void 0===b&&(b={});b.eventName=a;return this._eventDispatcher(b,this.params)};g.prototype.dispatchErrorFromResponse=function(a){this._errorDispatcher.dispatchErrorFromResponse(this.params,a)};g.prototype.dispatchInvalidParamError=function(a){this._errorDispatcher.dispatchInvalidParamError(this.params,a)};g.prototype.getEvent=function(a){this._eventWrappers[a]||(this.params[a]?
this.params[a]instanceof Array||(this.params[a]=[this.params[a]]):this.params[a]=[],this._eventWrappers[a]=new b.EventWrapper(this.params[a]));return this._eventWrappers[a]};g.prototype.addGlobalEventHandlers=function(a){for(var b in a)a.hasOwnProperty(b)&&this.addGlobalEventHandler(b,a[b])};g.prototype.addGlobalEventHandler=function(a,b,e,c){void 0===e&&(e=null);void 0===c&&(c="socialize");this._globalEventHandlers[a]||(this._globalEventHandlers[a]=[]);b=this._globalEventsManager.add(a,b,"component",
e,c,this.params);this._globalEventHandlers[a].push(b)};g.prototype.removeGlobalEventHandlers=function(a){for(var b in a)a.hasOwnProperty(b)&&this.removeGlobalEventHandler(b,a[b])};g.prototype.removeGlobalEventHandler=function(b,d,e,c){void 0===e&&(e=null);void 0===c&&(c="socialize");if(b=this._globalEventHandlers[b])e=a.utils.array.firstIndex(b,function(a){return a.handler==d}),-1<e&&(c=b[e],this._globalEventsManager.remove(c.fullEventName,c),b.splice(e,1))};g.prototype.prepareCallback=function(a){var b=
this;return function(){for(var e=[],c=0;c<arguments.length;c++)e[c-0]=arguments[c];if(!b._isDisposed)return a.apply(this,e)}};g.prototype.dispose=function(){for(var a in this._globalEventHandlers)for(var b in this._globalEventHandlers[a]){var e=this._globalEventHandlers[a][b];this._globalEventsManager.remove(e.fullEventName,e)}this._globalEventHandlers={};this._eventWrappers={};this.params={};this._isDisposed=!0};g.instanceCounter=0;g.NOT_IMPLEMENTED_ERROR="Abstract method not implemented";return g}();
b.BaseObject=g})(a._||(a._={}))})(gigya||(gigya={}));(function(a){a=a._||(a._={});a=a.DeviceTypes||(a.DeviceTypes={});a[a._undefined=0]="_undefined";a[a.desktop=1]="desktop";a[a.mobile=2]="mobile";a[a.auto=3]="auto"})(gigya||(gigya={}));
(function(a){(function(a){var g=function(){function a(b){void 0===b&&(b=[]);this._handlers=b}a.prototype.add=function(a){this._handlers.push(a)};a.prototype.remove=function(a){a=this._handlers.indexOf(a);-1<a&&this._handlers.splice(a,1)};return a}();a.EventWrapper=g})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){a.build||(a.build={version:"",time:""});a.providersConfig||(a.providersConfig={});a.isGigya||(a.isGigya=!0);a.partnerSettings||(a.partnerSettings={authMode:"cookie",baseDomains:"",plugins:{apiDomain:"us1.gigya.com"}});(function(a){})(a._||(a._={}));(function(b){(function(g){function h(){window._isAPIProxy?b.apiAdapters.web.APIProxy.init():(a.utils.queue.hold("bootstrap","API"),a.partnerSettings.baseDomain=k(),a.partnerSettings.plugins.originalApiDomain=a.partnerSettings.plugins.apiDomain,
a.partnerSettings.plugins.apiDomain=t(),(a.localInfo.isIE6||a.localInfo.isIE7||a.localInfo.isIE8)&&"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log("Gigya: It looks like you're using an old version of Internet Explorer. This browser is not supported. Please upgrade to a newer version of IE."),a.reports.init(),l(function(){p();a.thisScript.globalConf.customEventMap&&a.events.addMap(a.thisScript.globalConf.customEventMap);m(function(){r(function(){a.utils.queue.release("bootstrap",
"API");u();a._.chat.init();q();a.reports.trackAddressBarShares();a.utils.functions.invokeOnPageLoad(function(){return window.setTimeout(a.socialize.trackReferrals,1E3)})})});c();f();"function"==typeof onGigyaServiceReady&&onGigyaServiceReady("socialize");var b={sref:document.referrer};a.thisScript.globalConf.actionCounterPath&&(b.actionCounterPath=a.thisScript.globalConf.actionCounterPath);a.reports.report("loadc",a.thisScript.APIKey,null,null,null,b)}))}function f(){if(a.abTesting)for(var b in a.abTesting)if("optimizely"===
b){var c=a.abTesting[b];if(c.serviceParams&&c.serviceParams.hasOwnProperty("apiKey")){var d=window.location.pathname,e=!1;if(c.disabledPaths)for(var f=0;f<c.disabledPaths.length;f++)if(-1<c.disabledPaths[f].indexOf(d)){e=!0;break}if(!e)for(f=0;f<c.enabledPaths.length;f++)-1<d.indexOf(c.enabledPaths[f])&&a.utils.script.load("//cdn.optimizely.com/js/"+c.serviceParams.apiKey+".js")}}}function d(){function b(d){var e=c[d];c[d]=function(){for(var b=[],f=0;f<arguments.length;f++)b[f-0]=arguments[f];b=Array.prototype.slice.apply(b);
f=b[0];f="object"===typeof f&&null!=f&&f.hasOwnProperty("message")?f:{message:f};a.log.addLog(d,f,!1);e&&(e.apply?e.apply(c,b):e(b.join(" ")))}}var c=window.console;c||(c={});var d=a.utils.array.getArrayFromString(a.thisScript.globalConf.consoleLogLevel,",");if(0!=d.length){var e=a.log.CONSOLE_LOG_LEVELS;-1==a.utils.array.indexOf(d,"*")&&(e=a.utils.array.intersect(d,e));a.log.selectedConsoleLogLevels=e;a.utils.array.forEach(e,function(a){return b(a)})}}function e(b){"1"==a.utils.cookie.get("gig_debug")?
a.socialize.showDebugUI({ignoreApiQueue:!0,waitForDebug:!1,onLoad:b}):b()}function c(){a.utils.functions.invokeOnPageLoad(function(){"undefined"!=typeof window.gigya_omniture_conf&&a.utils.script.load(a._.getCdnResource("/js/GenesisExchange_Gigya.min.js"))})}function k(){return a._.getPageBaseDomain()||document.location.hostname}function t(){return a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:a.partnerSettings.plugins.apiDomain}function n(a){a||
(a="en-US");a=a.replace("_","-").toLowerCase();var b=a.split("-"),c=b[0],b=1<b.length?b[1]:c,b=b.toUpperCase();switch(a){case "es-mx":b="ES";break;case "pt-br":case "zh-cn":case "zh-hk":case "zh-tw":case "te-st":case "fr-inf":case "de-inf":case "es-inf":case "nl-inf":break;default:a=c}return{full:c+"-"+b,langCode:a,countryCode:b}}function l(b){var c=a.utils.DOM.getGigyaScriptElement(["gigya.js","socialize.js","socialize2.js","gsjssdk.js"]);if(c&&!window.__gig_hidescript){var d=a.utils.URL.getParamsFromURL(c.src,
!0)||{},e;""!==c.innerHTML.replace(/^\s+|\s+$/g,"")&&(e=a.utils.JSON.deserialize(c.innerHTML));"object"!==typeof e&&(e={});var f=window.__gigyaConf||{};a.thisScript={scriptElement:c,protocol:a.localInfo.protocol,baseDomain:c.src.split("/")[2],APIKey:d.apikey,lang:n(d.lang||f.lang||e.lang),globalConf:a.utils.object.merge([a.partnerSettings.plugins||{},e,f]),URLParams:d};a.thisScript.globalConf.lang=a.thisScript.lang.langCode;!a.thisScript.APIKey&&"object"===typeof console&&console.warn?console.warn("**** WARNING - Loading socialize.js without an APIKey parameter is unsupported and may result in an unexpected behavior.  ****"):
a.thisScript.globalConf.APIKey=a.thisScript.APIKey;b()}else 10>g.parseScriptRetries?(g.parseScriptRetries++,window.setTimeout(function(){l(b)},200)):(a.thisScript={scriptElement:null,protocol:a.localInfo.protocol,baseDomain:"https"===a.localInfo.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com",APIKey:"",lang:n(""),globalConf:{},URLParams:{}},b())}function m(c){var f="web",g=window.__gigAPIAdapterSettings,h=a.localInfo.supportsLocalStorage,k="__gigAPIAdapterSettings_"+a.thisScript.APIKey+"_"+
a.build.version;if(g&&"mobile"==g.getAdapterName()&&g.getAPIKey()==a.thisScript.APIKey)f="mobile",h&&(h={apiKey:g.getAPIKey?g.getAPIKey():null,adapterName:g.getAdapterName?g.getAdapterName():null,features:g.getFeatures?g.getFeatures():null,settings:g.getSettings?g.getSettings():null},a.utils.localStorage.setItem(k,a.utils.JSON.serialize(h)));else if(h){var l=a.utils.JSON.deserialize(a.utils.localStorage.getItem(k));l&&"mobile"==l.adapterName&&(f="mobile",g={},l.apiKey&&(g.getAPIKey=function(){return l.apiKey}),
l.adapterName&&(g.getAdapterName=function(){return l.adapterName}),l.features&&(g.getFeatures=function(){return l.features}),l.settings&&(g.getSettings=function(){return l.settings}))}b.apiAdapter=b.apiAdapters[f].newApiAdapter(g);a.utils.functions.createAlias("gigya.auth.loginToken.getTokenParam",b.apiAdapter.getTokenParam);d();e(function(){b.apiAdapter.init(c)})}function q(){a.thisScript.globalConf.autoLogin&&(a.external.facebook.autoLogin(),a.external.googlePlus.autoLogin())}function r(c){var d=
a.utils.URL.getParamsFromURL(document.location.href);d.errorCode&&d.regToken?b.checkCompleteRegistration(d,a.thisScript.globalConf,function(){return c()}):c()}function p(){var c=a.localInfo,d;c.isIE11&&!window.indexedDB?(d=b.MessagingMethod.Flash,a.thisScript.globalConf.legacyCrossSiteMethod="localConnection"):d=c.supportsPostMessage?b.MessagingMethod.PostMessage:b.MessagingMethod.Flash;c.messagingMethod=d}function u(){a.utils.queue.queueForExecution("API",function(){a.utils.functions.invokeOnPageLoad(function(){a.providersConfig.facebook&&
a.external.facebook.load(!1);a.providersConfig.googlePlus&&a.external.googlePlus.load()})})}g.parseScriptRetries=0;g.init=h;g.warnOnUnsupportedBrowser=function(){};g.loadABTesting=f;g.wrapJSConsole=d;g.startDebugIfNeeded=e;g.loadOmniture=c;g.getBaseDomain=k;g.getAPIDomain=t;g.parseLang=n;g.parseScriptElement=l;g.initApiAdapter=m;g.autoLogin=q;g.checkReturnFromRedirect=r;g.setMessagingMethod=p;g.injectExternalSdks=u;h()})(b.bootstrap||(b.bootstrap={}))})(a._||(a._={}))})(gigya||(gigya={}));


} else if (typeof console == 'object' && console.warn) {
console.warn('**** gigya.js loaded twice ****');
}
